import{r as o,j as e,S as d}from"./app-BVxYk9au.js";import{B as x}from"./createLucideIcon-DkX8M2EM.js";import{D as g,a as f,b,c as N,d as w,f as S}from"./dialog-CGxBnuey.js";import{L as v}from"./label-Dafu3XXE.js";import{T as y}from"./textarea-BfwEKmQW.js";import{S as p}from"./square-check-big-Cw5FLnGs.js";import"./index-DHAibKp_.js";import"./index-DbwHourB.js";import"./index-VNkP8PWw.js";import"./index-iMswcL89.js";import"./index-V-AxBa4e.js";function A({isOpen:u,onClose:m,followUpId:h,customerName:j}){const[a,r]=o.useState(""),[t,i]=o.useState(!1),[l,s]=o.useState(""),k=()=>{if(!a.trim()){s("Notes wajib diisi (minimal 10 karakter)");return}if(a.trim().length<10){s("Notes minimal harus 10 karakter");return}i(!0),s(""),d.post(`/sales/follow-ups/${h}/complete`,{resolution:"Follow up selesai dikerjakan",notes:a.trim()},{onSuccess:()=>{i(!1),r(""),m(),d.reload()},onError:n=>{i(!1),console.error("Error completing follow up:",n),s("Terjadi kesalahan saat menyelesaikan follow up.")}})},c=()=>{t||(r(""),s(""),m())};return e.jsx(g,{open:u,onOpenChange:c,children:e.jsxs(f,{className:"sm:max-w-[500px]",children:[e.jsxs(b,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5 text-green-600"}),"Selesaikan Follow Up"]}),e.jsxs(w,{children:["Anda akan menyelesaikan follow up untuk customer ",e.jsx("strong",{children:j}),". Silakan masukkan catatan mengenai hasil follow up ini."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{htmlFor:"notes",className:"text-sm font-medium",children:["Catatan Follow Up ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(y,{id:"notes",placeholder:"Masukkan catatan hasil follow up (minimal 10 karakter)...",value:a,onChange:n=>{r(n.target.value),l&&s("")},rows:4,className:l?"border-red-500":"",disabled:t}),e.jsxs("div",{className:"flex items-center justify-between",children:[l&&e.jsx("p",{className:"text-sm text-red-500",children:l}),e.jsxs("p",{className:`ml-auto text-xs ${a.length<10?"text-red-500":"text-green-600"}`,children:[a.length,"/10 karakter minimal"]})]})]}),e.jsxs("div",{className:"rounded-lg bg-blue-50 p-3 text-sm text-blue-800 dark:bg-background dark:text-white",children:[e.jsx("p",{className:"mb-1 font-medium",children:"Tips:"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"• Jelaskan hasil komunikasi dengan customer"}),e.jsx("li",{children:"• Catat respon atau feedback yang diberikan"}),e.jsx("li",{children:"• Tuliskan tindak lanjut yang diperlukan (jika ada)"})]})]})]}),e.jsxs(S,{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",onClick:c,disabled:t,children:"Batal"}),e.jsx(x,{onClick:k,disabled:t||!a.trim()||a.trim().length<10,className:"bg-green-600 hover:bg-green-700",children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Menyimpan..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:"Selesaikan Follow Up"})]})})]})]})})}export{A as default};
