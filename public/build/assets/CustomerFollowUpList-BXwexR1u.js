import{r as n,j as e,t as re,S as we}from"./app-BLez37KC.js";import{B as E}from"./badge-D4xRpmmj.js";import{a as ve,c as N,B as d}from"./createLucideIcon-D7jF-U3a.js";import{C as le,a as ie,b as ye,d as Ce,c as ke}from"./card-DPL22DDR.js";import{D as Se,a as _e,b as Ae,c as Te,d as De}from"./dialog-DJYaKbF2.js";import{I as O}from"./input-CfqiYqKE.js";import{A as Pe,a as Fe,b as Ue}from"./alert-BLaxbOdX.js";import{T as ne}from"./triangle-alert-5pw13N55.js";import{C as Ie}from"./circle-x-K7WxpJxN.js";import{C as Ee}from"./circle-check-big-BqYYaXAB.js";import{X as $}from"./index-CnGiqB3I.js";import{S as _,a as A,b as T,c as D,d as o}from"./select-DacCT32A.js";import{F as Le}from"./filter-0e3Il8QG.js";import{S as Ve}from"./search-5A-tRwWL.js";import{L as q}from"./loader-circle-tjWuaFAk.js";import{C as ze}from"./chevron-left-Bxm-WpsQ.js";import{C as Me}from"./chevron-right-Ci9N-8KN.js";import{U as B}from"./user-plus-CuG4zGia.js";import{C as Oe}from"./clock-CUawQq3k.js";import{E as qe}from"./eye-Dw8C-THZ.js";import{S as Be}from"./square-pen-DvB3-h_Y.js";import{T as Re}from"./trash-2-wKVmLTrg.js";import"./index-DACyNOe1.js";import"./index-C8WjSdCF.js";import"./index-CUGJ33FR.js";import"./index-S0T8KroD.js";import"./index-BM8vqouP.js";import"./index-DCLdOoa8.js";import"./index-CudrPBro.js";import"./chevron-down-Owv8Hoe3.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$e=ve("Info",Xe),He={success:{icon:Ee,alertVariant:"default",className:"border-l-green-500 bg-green-50 text-green-900 dark:bg-green-950/90 dark:text-green-100 dark:border-l-green-400",iconClassName:"text-green-600 dark:text-green-400"},error:{icon:Ie,alertVariant:"destructive",className:"border-l-red-500 bg-red-50 text-red-900 dark:bg-red-950/90 dark:text-red-100 dark:border-l-red-400",iconClassName:"text-red-600 dark:text-red-400"},warning:{icon:ne,alertVariant:"default",className:"border-l-yellow-500 bg-yellow-50 text-yellow-900 dark:bg-yellow-950/90 dark:text-yellow-100 dark:border-l-yellow-400",iconClassName:"text-yellow-600 dark:text-yellow-400"},info:{icon:$e,alertVariant:"default",className:"border-l-blue-500 bg-blue-50 text-blue-900 dark:bg-blue-950/90 dark:text-blue-100 dark:border-l-blue-400",iconClassName:"text-blue-600 dark:text-blue-400"}},Je={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 -translate-x-1/2"};function Ke({show:c,type:w,title:b,message:g,onClose:a,autoHide:v=!0,duration:m=5e3,position:u="top-right"}){const[l,x]=n.useState(!1),[h,C]=n.useState(!1),p=He[w],L=p.icon;return n.useEffect(()=>{if(c){x(!0);const f=setTimeout(()=>C(!0),50);return()=>clearTimeout(f)}else{C(!1);const f=setTimeout(()=>x(!1),320);return()=>clearTimeout(f)}},[c]),n.useEffect(()=>{if(c&&v){const f=setTimeout(()=>{a()},m);return()=>clearTimeout(f)}},[c,v,m,a]),l?e.jsx("div",{className:N("fixed z-50 w-full max-w-sm transition-all duration-300 ease-out","sm:max-w-md",Je[u],u.includes("right")&&"right-2 sm:right-4",u.includes("left")&&"left-2 sm:left-4",u.includes("top")&&"top-2 sm:top-4",u.includes("bottom")&&"bottom-2 sm:bottom-4"),style:{transform:h?"translate3d(0, 0, 0) scale(1)":u.includes("right")?"translate3d(100%, 0, 0) scale(0.95)":u.includes("left")?"translate3d(-100%, 0, 0) scale(0.95)":u.includes("top")?"translate3d(0, -100%, 0) scale(0.95)":"translate3d(0, 100%, 0) scale(0.95)",opacity:h?1:0,willChange:"transform, opacity",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transformStyle:"preserve-3d",transition:"transform 300ms cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 300ms ease-out"},children:e.jsxs(Pe,{variant:p.alertVariant,className:N("border-l-4 shadow-lg backdrop-blur-sm","transition-all duration-200 ease-in-out",p.className,"p-3 sm:p-4","hover:shadow-xl","dark:shadow-2xl dark:shadow-black/20"),children:[e.jsx(L,{className:N("h-4 w-4 flex-shrink-0",p.iconClassName)}),e.jsxs("div",{className:"flex items-start justify-between gap-2 w-full",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Fe,{className:N("font-semibold leading-tight","text-sm sm:text-base","line-clamp-2"),children:b}),e.jsx(Ue,{className:N("mt-1 leading-relaxed","text-xs sm:text-sm","line-clamp-3"),children:g})]}),e.jsx(d,{variant:"ghost",size:"sm",className:N("h-6 w-6 p-0 flex-shrink-0","hover:bg-black/5 dark:hover:bg-white/5","transition-colors duration-200","rounded-full"),onClick:a,"aria-label":"Close notification",children:e.jsx($,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]})}):null}function Qe(){const[c,w]=n.useState({show:!1,type:"info",title:"",message:""}),b=n.useCallback((a,v,m)=>{w({show:!0,type:a,title:v,message:m})},[]),g=n.useCallback(()=>{w(a=>({...a,show:!1}))},[]);return{notification:c,showNotification:b,hideNotification:g}}const R={pending:{label:"Pending",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},in_progress:{label:"In Progress",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},completed:{label:"Completed",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},cancelled:{label:"Cancelled",className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},X={low:{label:"Low",className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"},medium:{label:"Medium",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},high:{label:"High",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300"},urgent:{label:"Urgent",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}};function Ss({initialFilters:c={},users:w}){var G,Y,Z,ee,se;const b=()=>new Date().toISOString().split("T")[0],g=w.filter(s=>!s.roles||s.roles.length===0?!1:s.roles.some(t=>{const r=t.name.toLowerCase();return r.includes("sales")||r.includes("sale")})),[a,v]=n.useState(null),[m,u]=n.useState(!1),[l,x]=n.useState({search:c.search||"",status:c.status||"all",priority:c.priority||"all",assigned_to:c.assigned_to||"all",date_from:c.date_from||b(),date_to:c.date_to||b(),sort:c.sort||"created_at",direction:c.direction||"desc"}),[h,C]=n.useState(1),[p,L]=n.useState(15),[f,oe]=n.useState(!1),[H,ce]=n.useState(""),[de,P]=n.useState(!1),[i,J]=n.useState(null),[k,V]=n.useState("unassigned"),[z,K]=n.useState(!1),{notification:F,showNotification:S,hideNotification:me}=Qe(),ue=(s,t)=>{let r;return(...j)=>{clearTimeout(r),r=setTimeout(()=>s(...j),t)}},y=n.useCallback(async(s=1,t=l,r=!1)=>{var I;const j={page:s,per_page:p,...t},U=JSON.stringify(j);if(!(!r&&U===H)){u(!0),ce(U);try{const ae=await(await fetch("/admin/follow-ups/table-data",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((I=document.querySelector('meta[name="csrf-token"]'))==null?void 0:I.getAttribute("content"))||""},body:JSON.stringify(j)})).json();v(ae),C(ae.current_page)}catch(te){console.error("Failed to fetch data:",te)}finally{u(!1)}}},[p,H]),xe=n.useCallback(ue((s,t)=>{y(s,t,!0)},300),[]);n.useEffect(()=>{y(1,l,!0)},[]),n.useEffect(()=>{a&&y(1,l,!0)},[p]),n.useEffect(()=>{a&&xe(1,l)},[l]);const he=s=>{s.preventDefault()},M=s=>{s>=1&&s<=((a==null?void 0:a.last_page)||1)&&y(s,l,!0)},ge=s=>{const t=l.sort===s&&l.direction==="asc"?"desc":"asc";x(r=>({...r,sort:s,direction:t}))},pe=()=>{const s={search:"",status:"all",priority:"all",assigned_to:"all",date_from:b(),date_to:b(),sort:"created_at",direction:"desc"};x(s),C(1)},fe=s=>{var t;J(s),V(((t=s.assignee)==null?void 0:t.id.toString())||"unassigned"),P(!0)},je=async()=>{var s,t;if(i){K(!0);try{const r=await fetch(`/admin/follow-ups/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({customer_id:i.customer_id,subscription_id:i.subscription_id||"",priority:i.priority,status:i.status,description:i.description,notes:i.notes||"",resolution:i.resolution||"",assigned_to:k==="unassigned"?"":k})});if(r.ok){const j=await r.json();P(!1),J(null),V("unassigned"),y(h,l,!0);const U=k==="unassigned"?"Unassigned":((t=g.find(I=>I.id.toString()===k))==null?void 0:t.name)||"User";S("success","Assignment Successful!",`Follow up #${i.id} has been successfully assigned to ${U}.`)}else{const j=await r.text();console.error("Failed to assign user:",r.status,j),S("error","Assignment Failed","An error occurred while assigning the user. Please try again.")}}catch(r){console.error("Error assigning user:",r),S("error","Network Error","A network error occurred while assigning the user. Please check your connection and try again.")}finally{K(!1)}}},Ne=async s=>{confirm("Are you sure you want to delete this follow up? This action cannot be undone.")&&we.delete(route("admin.follow-ups.destroy",s),{onSuccess:()=>{y(h,l,!0),S("success","Follow Up Deleted",`Follow up #${s} has been successfully deleted.`)},onError:t=>{console.error("Error deleting follow up:",t),S("error","Delete Failed","An error occurred while deleting the follow up. Please try again.")}})},Q=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),be=({field:s})=>l.sort!==s?e.jsx("span",{className:"text-gray-400",children:"↕"}):l.direction==="asc"?e.jsx("span",{children:"↑"}):e.jsx("span",{children:"↓"}),W=[{header:"ID",className:"min-w-[80px]",sortable:!0,render:s=>e.jsxs("div",{className:"font-medium",children:["#",s.id]})},{header:"Customer",className:"min-w-[180px]",sortable:!0,render:s=>{var t,r;return e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(t=s.customer)==null?void 0:t.customer_name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:(r=s.customer)==null?void 0:r.customer_email}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",s.customer_id]})]})}},{header:"Subscription",className:"min-w-[140px]",render:s=>{var t,r;return e.jsx("div",{children:s.subscription_id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium",children:s.subscription_id}),e.jsx("div",{className:"max-w-[120px] truncate text-xs text-muted-foreground",title:(t=s.subscription)==null?void 0:t.subscription_description,children:(r=s.subscription)==null?void 0:r.subscription_description})]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"N/A"})})}},{header:"Status",className:"min-w-[100px]",sortable:!0,render:s=>{const t=R[s.status];return e.jsx(E,{className:t==null?void 0:t.className,children:t==null?void 0:t.label})}},{header:"Priority",className:"min-w-[100px]",sortable:!0,render:s=>{const t=X[s.priority];return e.jsx(E,{className:t==null?void 0:t.className,children:t==null?void 0:t.label})}},{header:"Assigned To",className:"min-w-[120px]",render:s=>e.jsx("div",{className:"text-sm",children:s.assignee?s.assignee.name:e.jsx("span",{className:"text-muted-foreground",children:"Unassigned"})})},{header:"Description",className:"min-w-[200px]",render:s=>e.jsx("div",{className:"max-w-[200px] truncate text-sm",title:s.description,children:s.description})},{header:"Notes",className:"min-w-[200px]",render:s=>e.jsx("div",{className:"max-w-[200px] truncate text-sm",title:s.notes,children:s.notes||e.jsx("span",{className:"text-muted-foreground",children:"No notes"})})},{header:"Created",className:"min-w-[120px]",sortable:!0,render:s=>e.jsxs("div",{className:"text-sm",children:[Q(s.created_at),s.is_overdue&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-red-600",children:[e.jsx(ne,{className:"h-3 w-3"}),"Overdue"]})]})},{header:"Completed",className:"min-w-[120px]",render:s=>e.jsx("div",{className:"text-sm",children:s.completed_at?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Oe,{className:"h-3 w-3"}),Q(s.completed_at)]}):e.jsx("span",{className:"text-muted-foreground",children:"-"})})},{header:"Actions",className:"min-w-[200px]",render:s=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(re,{href:`/admin/follow-ups/${s.id}`,children:e.jsx(d,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",title:"View Details",children:e.jsx(qe,{className:"h-4 w-4"})})}),e.jsx(d,{size:"sm",variant:"outline",className:"h-8 w-8 p-0 text-blue-600 hover:bg-blue-50 hover:text-blue-700",title:"Quick Assign",onClick:()=>fe(s),children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx(re,{href:`/admin/follow-ups/${s.id}/edit`,children:e.jsx(d,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",title:"Edit Follow Up",children:e.jsx(Be,{className:"h-4 w-4"})})}),e.jsx(d,{size:"sm",variant:"outline",className:"h-8 w-8 p-0 text-red-600 hover:bg-red-50 hover:text-red-700",title:"Delete Follow Up",onClick:()=>Ne(s.id),children:e.jsx(Re,{className:"h-4 w-4"})})]})}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ke,{show:F.show,type:F.type,title:F.title,message:F.message,onClose:me,autoHide:!0,duration:5e3,position:"top-right"}),e.jsx(le,{children:e.jsxs(ie,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ye,{children:"Follow Up Management"}),e.jsx(Ce,{children:"Manage and track customer follow ups"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>oe(!f),className:N("gap-2",f&&"bg-muted"),children:[e.jsx(Le,{className:"h-4 w-4"}),"Filters"]})})]}),e.jsxs("form",{onSubmit:he,className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ve,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(O,{placeholder:"Search by customer name, email, description...",value:l.search,onChange:s=>x(t=>({...t,search:s.target.value})),className:"pl-9"})]}),e.jsx(d,{type:"submit",size:"sm",disabled:m,children:m?e.jsx(q,{className:"h-4 w-4 animate-spin"}):"Search"}),(l.search||l.status!=="all"||l.priority!=="all"||l.assigned_to!=="all"||l.date_from||l.date_to)&&e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:pe,children:[e.jsx($,{className:"h-4 w-4"}),"Clear"]})]}),f&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 pt-4 md:grid-cols-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(_,{value:l.status,onValueChange:s=>x(t=>({...t,status:s})),children:[e.jsx(A,{children:e.jsx(T,{placeholder:"All Status"})}),e.jsxs(D,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"pending",children:"Pending"}),e.jsx(o,{value:"in_progress",children:"In Progress"}),e.jsx(o,{value:"completed",children:"Completed"}),e.jsx(o,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority"}),e.jsxs(_,{value:l.priority,onValueChange:s=>x(t=>({...t,priority:s})),children:[e.jsx(A,{children:e.jsx(T,{placeholder:"All Priorities"})}),e.jsxs(D,{children:[e.jsx(o,{value:"all",children:"All Priorities"}),e.jsx(o,{value:"low",children:"Low"}),e.jsx(o,{value:"medium",children:"Medium"}),e.jsx(o,{value:"high",children:"High"}),e.jsx(o,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Assigned To (Sales)"}),e.jsxs(_,{value:l.assigned_to,onValueChange:s=>x(t=>({...t,assigned_to:s})),children:[e.jsx(A,{children:e.jsx(T,{placeholder:"All Sales Users"})}),e.jsxs(D,{children:[e.jsx(o,{value:"all",children:"All Sales Users"}),e.jsx(o,{value:"unassigned",children:"Unassigned"}),g.map(s=>e.jsx(o,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.roles&&s.roles.length>0&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",s.roles.map(t=>t.name).join(", "),")"]})]})},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Date From"}),e.jsx(O,{type:"date",value:l.date_from,onChange:s=>x(t=>({...t,date_from:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Date To"}),e.jsx(O,{type:"date",value:l.date_to,onChange:s=>x(t=>({...t,date_to:s.target.value}))})]})]})]})}),e.jsxs(le,{children:[e.jsx(ie,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",(a==null?void 0:a.from)||0," to ",(a==null?void 0:a.to)||0," of ",(a==null?void 0:a.total)||0," entries"]}),e.jsxs(_,{value:p.toString(),onValueChange:s=>L(parseInt(s)),children:[e.jsx(A,{className:"w-20",children:e.jsx(T,{})}),e.jsxs(D,{children:[e.jsx(o,{value:"15",children:"15"}),e.jsx(o,{value:"25",children:"25"}),e.jsx(o,{value:"50",children:"50"}),e.jsx(o,{value:"100",children:"100"})]})]})]})})}),e.jsx(ke,{className:"p-0",children:e.jsxs("div",{className:"relative",children:[m&&e.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-background/50",children:e.jsx(q,{className:"h-8 w-8 animate-spin"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b",children:W.map((s,t)=>e.jsx("th",{className:N("p-3 text-left font-medium",s.className,s.sortable&&"cursor-pointer hover:bg-muted/50"),onClick:()=>s.sortable&&ge(s.header.toLowerCase().replace(" ","_")),children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.header,s.sortable&&e.jsx(be,{field:s.header.toLowerCase().replace(" ","_")})]})},t))})}),e.jsx("tbody",{children:a==null?void 0:a.data.map((s,t)=>e.jsx("tr",{className:"border-b hover:bg-muted/50",children:W.map((r,j)=>e.jsx("td",{className:N("p-3",r.className),children:r.render(s)},j))},t))})]})})]})})]}),a&&a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>M(h-1),disabled:h<=1||m,children:[e.jsx(ze,{className:"h-4 w-4"}),"Previous"]}),e.jsx("div",{className:"flex gap-1",children:[...Array(Math.min(5,a.last_page))].map((s,t)=>{const r=Math.max(1,Math.min(a.last_page-4,Math.max(1,h-2)))+t;return r<=a.last_page?e.jsx(d,{variant:h===r?"default":"outline",size:"sm",onClick:()=>M(r),disabled:m,className:"min-w-[40px]",children:r},r):null})}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>M(h+1),disabled:h>=a.last_page||m,children:["Next",e.jsx(Me,{className:"h-4 w-4"})]})]}),e.jsx(Se,{open:de,onOpenChange:P,children:e.jsxs(_e,{className:"sm:max-w-[500px]",children:[e.jsxs(Ae,{className:"pb-4",children:[e.jsx(Te,{className:"text-lg font-semibold",children:"Quick Assign Follow Up"}),e.jsxs(De,{className:"text-sm text-muted-foreground",children:["Assign follow up #",i==null?void 0:i.id," to a sales user for efficient task management"]})]}),e.jsxs("div",{className:"space-y-6",children:[i&&e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("h4",{className:"mb-3 text-sm font-semibold text-foreground",children:"Follow Up Details"}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Customer:"}),e.jsx("span",{className:"text-sm font-medium",children:(G=i.customer)==null?void 0:G.customer_name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Customer ID:"}),e.jsx("span",{className:"font-mono text-sm",children:i.customer_id})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Priority:"}),e.jsx(E,{className:(Y=X[i.priority])==null?void 0:Y.className,children:(Z=X[i.priority])==null?void 0:Z.label})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),e.jsx(E,{className:(ee=R[i.status])==null?void 0:ee.className,children:(se=R[i.status])==null?void 0:se.label})]}),i.description&&e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("span",{className:"mb-1 block text-sm text-muted-foreground",children:"Description:"}),e.jsx("p",{className:"rounded bg-muted/50 p-2 text-sm text-wrap text-foreground",children:i.description})]}),i.assignee&&e.jsxs("div",{className:"flex items-center justify-between border-t pt-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Currently Assigned:"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:i.assignee.name})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assign to Sales User"}),e.jsxs(_,{value:k,onValueChange:V,children:[e.jsx(A,{className:"w-full",children:e.jsx(T,{placeholder:"Select a sales user..."})}),e.jsxs(D,{children:[e.jsx(o,{value:"unassigned",className:"text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Unassign (No user)"]})}),g.length>0?g.map(s=>e.jsx(o,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium",children:s.name})})]})},s.id)):e.jsx(o,{value:"no-sales",disabled:!0,className:"text-muted-foreground",children:"No sales users available"})]})]}),g.length===0&&e.jsx("p",{className:"rounded bg-amber-50 p-2 text-xs text-amber-600",children:"⚠️ No users with sales roles found. Please ensure users have proper role assignments."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-6",children:[e.jsx(d,{variant:"outline",onClick:()=>P(!1),disabled:z,children:"Cancel"}),e.jsx(d,{onClick:je,disabled:z||g.length===0,className:"min-w-[100px]",children:z?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Assigning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Assign"]})})]})]})})]})}export{Ss as default};
