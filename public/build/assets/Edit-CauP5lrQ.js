import{x as B,j as e,Q as T,t as C}from"./app-DE-hsCNC.js";import{B as V}from"./badge-cRl_dEeh.js";import{B as _}from"./createLucideIcon-Cco9Y3GR.js";import{C as S,a as k,b as D,c as F}from"./card-fwMX-Di_.js";import{I as H}from"./input-3TknKiPK.js";import{L as a}from"./label-DddZZYvZ.js";import{u as Q,N as R}from"./notification-BHhlc0-K.js";import{S as o,a as c,b as m,c as x,d as r}from"./select-Cfb0zG0b.js";import{T as u}from"./textarea-YyfsJSWS.js";import{A as q}from"./app-layout-DZScp_QL.js";import{A as M}from"./arrow-left-CPIkHQIX.js";import{C as O}from"./calendar-BHAa_jPS.js";import{C as $}from"./clock-CjrzkKRo.js";import{S as z}from"./save-BLo2V40H.js";import"./index-CUFY0TLt.js";import"./alert-CngiucgJ.js";import"./triangle-alert-DMgJl4tP.js";import"./circle-x-rbTc4_Ay.js";import"./circle-check-big-gPlmNKet.js";import"./index-i1yjT0kI.js";import"./index-CLwuHly2.js";import"./index-CkTHI7Xz.js";import"./index-DpX5MTmY.js";import"./chevron-down-yoRcCLtw.js";import"./chevron-up-BU3i9sza.js";import"./breadcrumbs-CyRhQ6mX.js";import"./theme-toggle-DUe8uWlC.js";import"./index-BVh7DB6t.js";import"./index-DS2TguYX.js";import"./chevron-right-CiucHPib.js";import"./file-text-Dp3GDcf5.js";import"./trending-up-4dz4ss3j.js";import"./target-B55bVsRM.js";const w={pending:{label:"Pending",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},in_progress:{label:"In Progress",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},completed:{label:"Completed",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},cancelled:{label:"Cancelled",className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}};function ke({followUp:s,users:A}){var g,j,b,N,v,f,y;const{data:n,setData:d,put:I,processing:p,errors:i}=B({customer_id:s.customer_id,subscription_id:s.subscription_id||"",priority:s.priority,status:s.status,description:s.description,notes:s.notes||"",resolution:s.resolution||"",assigned_to:((j=(g=s.assignee)==null?void 0:g.id)==null?void 0:j.toString())||"unassigned"}),{notification:l,showNotification:E,hideNotification:L}=Q(),P=t=>{t.preventDefault(),I(route("admin.follow-ups.update",s.id),{preserveState:!1,onError:G=>{E("error","Update Failed","An error occurred while updating the follow up. Please check the form and try again.")}})},h=t=>new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(q,{children:[e.jsx(T,{title:`Edit Follow Up #${s.id}`}),e.jsx(R,{show:l.show,type:l.type,title:l.title,message:l.message,onClose:L,autoHide:!0,duration:5e3,position:"top-right"}),e.jsxs("div",{className:"container mx-auto space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{href:route("admin.follow-ups.show",s.id),className:"inline-flex h-10 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium ring-offset-background transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50",children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Back to Details"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Edit Follow Up"}),e.jsxs("p",{className:"text-muted-foreground",children:["Follow Up #",s.id]})]})]}),e.jsxs(S,{className:"bg-muted/50",children:[e.jsx(k,{className:"pb-3",children:e.jsxs(D,{className:"flex items-center gap-2 text-base",children:["Current Status",e.jsx(V,{className:(b=w[s.status])==null?void 0:b.className,children:(N=w[s.status])==null?void 0:N.label})]})}),e.jsx(F,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Created"}),e.jsx("p",{className:"text-sm",children:h(s.created_at)})]})]}),s.completed_at&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-sm",children:h(s.completed_at)})]})]})]})})]}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(D,{children:"Edit Follow Up Details"})}),e.jsx(F,{children:e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Customer"}),e.jsxs("div",{className:"rounded-md border border-input bg-muted px-3 py-2",children:[e.jsx("div",{className:"text-sm font-medium",children:(v=s.customer)==null?void 0:v.customer_name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(f=s.customer)==null?void 0:f.customer_id," â€¢ ",(y=s.customer)==null?void 0:y.customer_email]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"subscription_id",children:"Subscription ID (Optional)"}),e.jsx(H,{id:"subscription_id",value:n.subscription_id,onChange:t=>d("subscription_id",t.target.value),placeholder:"Enter subscription ID"}),i.subscription_id&&e.jsx("p",{className:"text-sm text-red-600",children:i.subscription_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"priority",children:"Priority *"}),e.jsxs(o,{value:n.priority,onValueChange:t=>d("priority",t),children:[e.jsx(c,{children:e.jsx(m,{placeholder:"Select priority"})}),e.jsxs(x,{children:[e.jsx(r,{value:"low",children:"Low"}),e.jsx(r,{value:"medium",children:"Medium"}),e.jsx(r,{value:"high",children:"High"}),e.jsx(r,{value:"urgent",children:"Urgent"})]})]}),i.priority&&e.jsx("p",{className:"text-sm text-red-600",children:i.priority})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"status",children:"Status *"}),e.jsxs(o,{value:n.status,onValueChange:t=>d("status",t),children:[e.jsx(c,{children:e.jsx(m,{placeholder:"Select status"})}),e.jsxs(x,{children:[e.jsx(r,{value:"pending",children:"Pending"}),e.jsx(r,{value:"in_progress",children:"In Progress"}),e.jsx(r,{value:"completed",children:"Completed"}),e.jsx(r,{value:"cancelled",children:"Cancelled"})]})]}),i.status&&e.jsx("p",{className:"text-sm text-red-600",children:i.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"assigned_to",children:"Assigned To"}),e.jsxs(o,{value:n.assigned_to,onValueChange:t=>d("assigned_to",t),children:[e.jsx(c,{children:e.jsx(m,{placeholder:"Select user"})}),e.jsxs(x,{children:[e.jsx(r,{value:"unassigned",children:"Not Assigned"}),A.map(t=>e.jsx(r,{value:t.id.toString(),children:t.name},t.id))]})]}),i.assigned_to&&e.jsx("p",{className:"text-sm text-red-600",children:i.assigned_to})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"description",children:"Description *"}),e.jsx(u,{id:"description",value:n.description,onChange:t=>d("description",t.target.value),placeholder:"Describe the follow up requirement...",rows:4}),i.description&&e.jsx("p",{className:"text-sm text-red-600",children:i.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"notes",children:"Additional Notes"}),e.jsx(u,{id:"notes",value:n.notes,onChange:t=>d("notes",t.target.value),placeholder:"Any additional notes...",rows:3}),i.notes&&e.jsx("p",{className:"text-sm text-red-600",children:i.notes})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"resolution",children:"Resolution"}),e.jsx(u,{id:"resolution",value:n.resolution,onChange:t=>d("resolution",t.target.value),placeholder:"Describe the resolution (if completed)...",rows:3}),i.resolution&&e.jsx("p",{className:"text-sm text-red-600",children:i.resolution})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-6",children:[e.jsxs(_,{type:"submit",disabled:p,className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),p?"Updating...":"Update Follow Up"]}),e.jsx(C,{href:route("admin.follow-ups.show",s.id),children:e.jsx(_,{type:"button",variant:"outline",children:"Cancel"})})]})]})})]})]})]})}export{ke as default};
