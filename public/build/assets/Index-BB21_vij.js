import{J as S,j as s,Q as D,t as f}from"./app-CyvLo_kF.js";import{B as b}from"./badge-CJQFMs4o.js";import{c as x,B as l}from"./createLucideIcon-D-sjWZvW.js";import{C as r,a as i,b as c,c as a,d as m}from"./card-T-NU6bKg.js";import{D as N}from"./data-table-CMc4YHBv.js";import{A as k,U as v,D as y,F as L}from"./app-layout-BOv98ebM.js";import{D as g}from"./download-99pb0_Pc.js";import{C as K}from"./calendar-IE8MaLjJ.js";import"./input-DikySJdn.js";import"./chevron-left-DzU6krFF.js";import"./chevron-right-BTx1AGsf.js";import"./index-BdX96gtP.js";import"./index-CNJMztRm.js";import"./app-logo-DEQ0MYgx.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],A=x("Activity",R);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],T=x("ChartColumn",M);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],U=x("TrendingUp",I),E=[{title:"Dashboard",href:"/dashboard"},{title:"Reports",href:"/admin/reports"}];function Y({stats:t,recentImports:h,subscriptionsByStatus:_,monthlyGrowth:u}){var p;const{auth:o}=S().props,j=((p=o==null?void 0:o.user)==null?void 0:p.permissions)||[];console.log("User Permissions:",j);const d=e=>{window.open(`/admin/reports/export?type=${e}`,"_blank")},w=[{header:"Customer ID",accessorKey:"customer_id"},{header:"Name",accessorKey:"customer_name"},{header:"Email",accessorKey:"customer_email"},{header:"Phone",accessorKey:"customer_phone"},{header:"Created",accessorKey:"created_at",cell:e=>new Date(e.created_at).toLocaleDateString()}],C=[{header:"Subscription ID",accessorKey:"subscription_id"},{header:"Customer",accessorKey:"customer",cell:e=>{var n;return((n=e.customer)==null?void 0:n.customer_name)||"N/A"}},{header:"Service ID",accessorKey:"serv_id"},{header:"Status",accessorKey:"subscription_status",cell:e=>s.jsx(b,{variant:e.subscription_status==="active"?"default":"secondary",children:e.subscription_status})},{header:"Created",accessorKey:"created_at",cell:e=>new Date(e.created_at).toLocaleDateString()}];return s.jsxs(k,{breadcrumbs:E,children:[s.jsx(D,{title:"Reports"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Reports"}),s.jsx("p",{className:"text-muted-foreground",children:"Analytics and insights for your business"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(l,{variant:"outline",onClick:()=>d("customers"),children:[s.jsx(g,{className:"mr-2 h-4 w-4"}),"Export Customers"]}),s.jsxs(l,{variant:"outline",onClick:()=>d("subscriptions"),children:[s.jsx(g,{className:"mr-2 h-4 w-4"}),"Export Subscriptions"]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(c,{className:"text-sm font-medium",children:"Total Customers"}),s.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(a,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.total_customers.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.customers_with_subscriptions," with subscriptions"]})]})]}),s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(c,{className:"text-sm font-medium",children:"Total Subscriptions"}),s.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(a,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.total_subscriptions.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.active_subscriptions," active"]})]})]}),s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(c,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(a,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.active_subscriptions.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t.active_subscriptions/t.total_subscriptions*100).toFixed(1),"% of total"]})]})]}),s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(c,{className:"text-sm font-medium",children:"Inactive Subscriptions"}),s.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(a,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.inactive_subscriptions.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t.inactive_subscriptions/t.total_subscriptions*100).toFixed(1),"% of total"]})]})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(r,{children:[s.jsx(i,{children:s.jsxs(c,{className:"flex items-center gap-2",children:[s.jsx(T,{className:"h-5 w-5"}),"Subscriptions by Status"]})}),s.jsx(a,{children:s.jsx("div",{className:"space-y-3",children:Object.entries(_).map(([e,n])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(b,{variant:e==="active"?"default":"secondary",children:e})}),s.jsx("div",{className:"text-sm font-medium",children:n.toLocaleString()})]},e))})})]}),s.jsxs(r,{children:[s.jsx(i,{children:s.jsxs(c,{className:"flex items-center gap-2",children:[s.jsx(K,{className:"h-5 w-5"}),"Monthly Growth"]})}),s.jsx(a,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Recent Months - Customers"}),s.jsx("div",{className:"space-y-1",children:Object.entries(u.customers).slice(-3).map(([e,n])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:e}),s.jsx("span",{className:"font-medium",children:n})]},e))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Recent Months - Subscriptions"}),s.jsx("div",{className:"space-y-1",children:Object.entries(u.subscriptions).slice(-3).map(([e,n])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:e}),s.jsx("span",{className:"font-medium",children:n})]},e))})]})]})})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(r,{children:[s.jsxs(i,{children:[s.jsx(c,{children:"Recent Customers"}),s.jsx(m,{children:"Latest imported customer records"})]}),s.jsx(a,{children:s.jsx(N,{columns:w,data:h.recent_customers})})]}),s.jsxs(r,{children:[s.jsxs(i,{children:[s.jsx(c,{children:"Recent Subscriptions"}),s.jsx(m,{children:"Latest imported subscription records"})]}),s.jsx(a,{children:s.jsx(N,{columns:C,data:h.recent_subscriptions})})]})]}),s.jsxs(r,{children:[s.jsxs(i,{children:[s.jsx(c,{children:"Quick Actions"}),s.jsx(m,{children:"Common tasks and navigation"})]}),s.jsx(a,{children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx(l,{asChild:!0,variant:"outline",children:s.jsxs(f,{href:"/admin/database-import",children:[s.jsx(y,{className:"mr-2 h-4 w-4"}),"Import Data"]})}),j.includes("manage-users")&&s.jsx(l,{asChild:!0,variant:"outline",children:s.jsxs(f,{href:"/admin/users",children:[s.jsx(v,{className:"mr-2 h-4 w-4"}),"Manage Users"]})}),s.jsxs(l,{variant:"outline",onClick:()=>d("customers"),children:[s.jsx(L,{className:"mr-2 h-4 w-4"}),"Generate Report"]})]})})]})]})]})}export{Y as default};
