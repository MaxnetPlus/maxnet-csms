import{J as b,j as s,Q as v,t as h}from"./app-B2hYMNI5.js";import{B as w}from"./badge-8wrSQBmR.js";import{a as g,B as n}from"./createLucideIcon-DV_iH8MW.js";import{C as i,a as r,b as a,c,d as y}from"./card-Cm0bTvNT.js";import{A as C,D as j}from"./app-layout-dhacHFzS.js";import{D as u}from"./download-CAA1j6F7.js";import{U as f}from"./breadcrumbs-kb4jvroI.js";import{T as _}from"./trending-up-BJVc80kP.js";import{C as S}from"./chart-column-CqhaXCxH.js";import{C as A}from"./calendar-iWWhmyFl.js";import{F as D}from"./file-text-D6HImMR6.js";import"./index-CM3CHnuf.js";import"./index-Dkk_Qt6x.js";import"./index-C74G8zdK.js";import"./chevron-down-CwpXDSUf.js";import"./app-logo-DAmxlVvw.js";import"./target-BiGQP1qa.js";import"./index-MU9arsYp.js";import"./index-liacH3qE.js";import"./index-uqU1JcBO.js";import"./index-B49Zg7V3.js";import"./index-D90rp3hY.js";import"./chevron-right-Dd4b5nL4.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],k=g("Activity",L),R=[{title:"Dashboard",href:"/dashboard"}];function ts({stats:t,recentImports:T,subscriptionsByStatus:N,monthlyGrowth:x}){var p;const{auth:d}=b().props,o=((p=d==null?void 0:d.user)==null?void 0:p.permissions)||[];console.log("User Permissions:",o);const m=e=>{window.open(`/admin/reports/export?type=${e}`,"_blank")};return s.jsxs(C,{breadcrumbs:R,children:[s.jsx(v,{title:"Reports"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Customer and Subscription Analytics"})]}),o.includes("export-data")&&s.jsxs("div",{className:"mt-4 flex w-full gap-2 md:static md:mt-0 md:w-auto md:flex-row",children:[s.jsxs(n,{variant:"outline",onClick:()=>m("customers"),className:"w-full md:w-auto",children:[s.jsx(u,{className:"mr-2 h-4 w-4"}),"Export Customers"]}),s.jsxs(n,{variant:"outline",onClick:()=>m("subscriptions"),className:"w-full md:w-auto",children:[s.jsx(u,{className:"mr-2 h-4 w-4"}),"Export Subscriptions"]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(i,{children:[s.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(a,{className:"text-sm font-medium",children:"Total Customers"}),s.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.total_customers.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.customers_with_subscriptions," with subscriptions"]})]})]}),s.jsxs(i,{children:[s.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(a,{className:"text-sm font-medium",children:"Total Subscriptions"}),s.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.total_subscriptions.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.active_subscriptions," active"]})]})]}),s.jsxs(i,{children:[s.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(a,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.active_subscriptions.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t.active_subscriptions/t.total_subscriptions*100).toFixed(1),"% of total"]})]})]}),s.jsxs(i,{children:[s.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(a,{className:"text-sm font-medium",children:"Inactive Subscriptions"}),s.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.inactive_subscriptions.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t.inactive_subscriptions/t.total_subscriptions*100).toFixed(1),"% of total"]})]})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(i,{children:[s.jsx(r,{children:s.jsxs(a,{className:"flex items-center gap-2",children:[s.jsx(S,{className:"h-5 w-5"}),"Subscriptions by Status"]})}),s.jsx(c,{children:s.jsx("div",{className:"space-y-3",children:Object.entries(N).map(([e,l])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(w,{variant:e==="active"?"default":"secondary",children:e})}),s.jsx("div",{className:"text-sm font-medium",children:l.toLocaleString()})]},e))})})]}),s.jsxs(i,{children:[s.jsx(r,{children:s.jsxs(a,{className:"flex items-center gap-2",children:[s.jsx(A,{className:"h-5 w-5"}),"Monthly Growth"]})}),s.jsx(c,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Recent Months - Customers"}),s.jsx("div",{className:"space-y-1",children:Object.entries(x.customers).slice(-3).map(([e,l])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:e}),s.jsx("span",{className:"font-medium",children:l})]},e))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Recent Months - Subscriptions"}),s.jsx("div",{className:"space-y-1",children:Object.entries(x.subscriptions).slice(-3).map(([e,l])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:e}),s.jsx("span",{className:"font-medium",children:l})]},e))})]})]})})]})]}),s.jsxs(i,{children:[s.jsxs(r,{children:[s.jsx(a,{children:"Quick Actions"}),s.jsx(y,{children:"Common tasks and navigation"})]}),s.jsx(c,{children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.includes("export-data")&&s.jsx(n,{asChild:!0,variant:"outline",children:s.jsxs(h,{href:"/admin/database-import",children:[s.jsx(j,{className:"mr-2 h-4 w-4"}),"Import Data"]})}),o.includes("manage-users")&&s.jsx(n,{asChild:!0,variant:"outline",children:s.jsxs(h,{href:"/admin/users",children:[s.jsx(f,{className:"mr-2 h-4 w-4"}),"Manage Users"]})}),s.jsxs(n,{variant:"outline",onClick:()=>m("customers"),children:[s.jsx(D,{className:"mr-2 h-4 w-4"}),"Generate Report"]})]})})]})]})]})}export{ts as default};
