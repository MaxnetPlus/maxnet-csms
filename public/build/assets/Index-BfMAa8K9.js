import{r as d,S as v,j as e,t as E}from"./app-Ct02SPqS.js";import{B as y}from"./badge-Co5a1Bgq.js";import{B as m}from"./createLucideIcon-_hu__2Zm.js";import{C as p,a as H,b as R,c as g}from"./card-CCG6Tz-L.js";import{I as S}from"./input-CsnwnHV3.js";import{S as D,a as C,b as w,c as T,d as l}from"./select-BQhgVxFA.js";import{S as V}from"./sales-layout-CGKux2hJ.js";import q from"./ComplateModal-CHv-lJjd.js";import{S as _}from"./search-D6qZOkyj.js";import{U as K}from"./user-2gnWEvgD.js";import{M as Y}from"./mail-khOo8Ohe.js";import{P as G}from"./phone-iZvxRQm5.js";import{C as J}from"./calendar-CRlxWopN.js";import{S as N}from"./square-check-big-26BxNZyg.js";import"./index-B8WYyssL.js";import"./index-BCvBiwKD.js";import"./index-kYJyEc4f.js";import"./index-jj74kwHj.js";import"./index-DD0-SZBN.js";import"./index-DcQsAyWr.js";import"./chevron-down-BWteAm1R.js";import"./chevron-up-CMJIJi5y.js";import"./breadcrumbs-BQDwV_-u.js";import"./app-logo-CH_8fs4b.js";import"./index-BcBdkLzA.js";import"./index-Cj33yIcJ.js";import"./index-DHUJ--yc.js";import"./chevron-right-DrnitRZM.js";import"./chart-column-KOP3TTEp.js";import"./dialog-w7GOOatN.js";import"./label-B5twVajU.js";import"./textarea-C0PUG6F-.js";function we({followUps:t,filters:x}){const[c,I]=d.useState(x.search||""),[i,O]=d.useState(x.status||"all"),[r,F]=d.useState(x.priority||"all"),[n,u]=d.useState(x.date_from||new Date().toISOString().split("T")[0]),[o,h]=d.useState(x.date_to||new Date().toISOString().split("T")[0]),[P,f]=d.useState(!1),[j,b]=d.useState(null);d.useEffect(()=>{const s=setTimeout(()=>{v.get("/sales/follow-ups",{search:c||void 0,status:i!=="all"?i:void 0,priority:r!=="all"?r:void 0,date_from:n||void 0,date_to:o||void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},[c,i,r,n,o]);const z=s=>({pending:"default",in_progress:"secondary",completed:"success",cancelled:"destructive"})[s]||"default",B=s=>({low:"secondary",medium:"default",high:"destructive"})[s]||"default",M=s=>({pending:"Pending",in_progress:"Sedang Dikerjakan",completed:"Selesai",cancelled:"Dibatalkan"})[s]||s,L=s=>({low:"Rendah",medium:"Sedang",high:"Tinggi"})[s]||s,$=(s,a)=>{b({id:s,customerName:a}),f(!0)},A=()=>{f(!1),b(null)};return e.jsxs(V,{breadcrumbs:[{title:"Dashboard",href:"/sales"},{title:"Follow Up",href:"/sales/follow-ups"}],children:[e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-xl font-bold md:text-2xl",children:"Follow Up Customer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n===o&&n===new Date().toISOString().split("T")[0]?`Follow up hari ini - Total ${t.total} follow up`:`Total ${t.total} follow up yang ditugaskan`})]})}),e.jsxs(p,{className:"border-0 shadow-sm md:border md:shadow-none",children:[e.jsx(H,{className:"pb-3",children:e.jsxs(R,{className:"flex items-center gap-2 text-base md:text-lg",children:[e.jsx(_,{className:"h-4 w-4 md:h-5 md:w-5"}),"Filter & Pencarian"]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(m,{variant:n===new Date().toISOString().split("T")[0]&&o===new Date().toISOString().split("T")[0]?"default":"outline",size:"sm",onClick:()=>{const s=new Date().toISOString().split("T")[0];u(s),h(s)},className:"h-8 text-xs",children:"Hari Ini"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{const s=new Date;s.setDate(s.getDate()-1);const a=s.toISOString().split("T")[0];u(a),h(a)},className:"h-8 text-xs",children:"Kemarin"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{const s=new Date,a=new Date(s);a.setDate(s.getDate()-s.getDay()),u(a.toISOString().split("T")[0]),h(s.toISOString().split("T")[0])},className:"h-8 text-xs",children:"Minggu Ini"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{const s=new Date,a=new Date(s.getFullYear(),s.getMonth(),1);u(a.toISOString().split("T")[0]),h(s.toISOString().split("T")[0])},className:"h-8 text-xs",children:"Bulan Ini"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"}),e.jsx(S,{placeholder:"Cari nama customer...",value:c,onChange:s=>I(s.target.value),className:"h-11 pl-10 md:h-10"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Dari Tanggal"}),e.jsx(S,{type:"date",value:n,onChange:s=>u(s.target.value),className:"h-11 md:h-10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Sampai Tanggal"}),e.jsx(S,{type:"date",value:o,onChange:s=>h(s.target.value),className:"h-11 md:h-10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Status"}),e.jsxs(D,{value:i,onValueChange:O,children:[e.jsx(C,{className:"h-11 md:h-10",children:e.jsx(w,{placeholder:"Semua Status"})}),e.jsxs(T,{children:[e.jsx(l,{value:"all",children:"Semua Status"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"in_progress",children:"Sedang Dikerjakan"}),e.jsx(l,{value:"completed",children:"Selesai"}),e.jsx(l,{value:"cancelled",children:"Dibatalkan"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Prioritas"}),e.jsxs(D,{value:r,onValueChange:F,children:[e.jsx(C,{className:"h-11 md:h-10",children:e.jsx(w,{placeholder:"Semua Prioritas"})}),e.jsxs(T,{children:[e.jsx(l,{value:"all",children:"Semua Prioritas"}),e.jsx(l,{value:"low",children:"Rendah"}),e.jsx(l,{value:"medium",children:"Sedang"}),e.jsx(l,{value:"high",children:"Tinggi"})]})]})]})]})]})})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:t.data.length>0?t.data.map(s=>{var a;return e.jsx(p,{className:"border-0 shadow-sm transition-shadow hover:shadow-md md:border md:shadow-none",children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-3 flex flex-col gap-2 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground md:h-5 md:w-5"}),e.jsx("h3",{className:"text-base font-semibold md:text-lg",children:((a=s.customer)==null?void 0:a.customer_name)||"Customer Tidak Diketahui"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:z(s.status),className:"text-xs",children:M(s.status)}),e.jsx(y,{variant:B(s.priority),className:"text-xs",children:L(s.priority)})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"mb-1 text-xs font-medium text-muted-foreground md:text-sm",children:"Deskripsi:"}),e.jsx("p",{className:"text-xs md:text-sm",children:s.description||"Tidak ada deskripsi"})]}),s.customer&&e.jsxs("div",{className:"mb-3 space-y-1 text-xs text-muted-foreground md:text-sm",children:[s.customer.customer_email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-3 w-3 md:h-4 md:w-4"}),e.jsx("span",{children:s.customer.customer_email})]}),s.customer.customer_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:s.customer.customer_phone})]})]}),s.notes&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Catatan:"}),e.jsx("p",{className:"rounded bg-muted/50 p-2 text-sm",children:s.notes})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsxs("span",{children:["Dibuat: ",new Date(s.created_at).toLocaleDateString("id-ID")]})]}),s.completed_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsxs("span",{children:["Selesai: ",new Date(s.completed_at).toLocaleDateString("id-ID")]})]}),s.creator&&e.jsxs("span",{children:["Dibuat oleh: ",s.creator.name]})]})]}),e.jsxs("div",{className:"flex shrink-0 flex-col gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(E,{href:`/sales/follow-ups/${s.id}`,children:"Detail"})}),s.status!=="completed"&&s.status!=="cancelled"&&e.jsxs(m,{size:"sm",onClick:()=>{var k;return $(s.id,((k=s.customer)==null?void 0:k.customer_name)||"Customer Tidak Diketahui")},className:"bg-primary hover:bg-primary/90",children:[e.jsx(N,{className:"mr-1 h-4 w-4"}),"Selesai"]})]})]})})},s.id)}):e.jsx(p,{children:e.jsxs(g,{className:"p-8 text-center",children:[e.jsx(N,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Tidak Ada Follow Up"}),e.jsx("p",{className:"mb-4 text-muted-foreground",children:c||i||r?"Tidak ada follow up yang sesuai dengan filter.":"Anda tidak memiliki follow up yang ditugaskan saat ini."}),!c&&!i&&!r&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow up akan muncul ketika admin menugaskan kepada Anda."})]})})}),t.last_page>1&&e.jsx(p,{children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Halaman ",t.current_page," dari ",t.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[t.current_page>1&&e.jsx(m,{variant:"outline",size:"sm",onClick:()=>v.get(`/sales/follow-ups?page=${t.current_page-1}`,{search:c||void 0,status:i!=="all"?i:void 0,priority:r!=="all"?r:void 0,date_from:n||void 0,date_to:o||void 0}),children:"Sebelumnya"}),t.current_page<t.last_page&&e.jsx(m,{variant:"outline",size:"sm",onClick:()=>v.get(`/sales/follow-ups?page=${t.current_page+1}`,{search:c||void 0,status:i!=="all"?i:void 0,priority:r!=="all"?r:void 0,date_from:n||void 0,date_to:o||void 0}),children:"Selanjutnya"})]})]})})})]}),j&&e.jsx(q,{isOpen:P,onClose:A,followUpId:j.id,customerName:j.customerName})]})}export{we as default};
