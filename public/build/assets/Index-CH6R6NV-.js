import{r as x,S as o,j as e,t as h}from"./app-DE-hsCNC.js";import{B as d}from"./createLucideIcon-Cco9Y3GR.js";import{C as r,a as m,b as c,c as n}from"./card-fwMX-Di_.js";import{I as v}from"./input-3TknKiPK.js";import{A as y}from"./app-layout-DZScp_QL.js";import{U as u}from"./breadcrumbs-CyRhQ6mX.js";import{T as w}from"./target-B55bVsRM.js";import{A as _}from"./award-DnS6D-qq.js";import{T}from"./trending-up-4dz4ss3j.js";import{S as p}from"./search-CWIA0DSq.js";import{E as S}from"./eye-iswd5NTs.js";import{S as k}from"./square-pen-D3AGSlC4.js";import{T as C}from"./trash-2-DvW_RDRF.js";import"./index-i1yjT0kI.js";import"./index-CUFY0TLt.js";import"./index-BVh7DB6t.js";import"./theme-toggle-DUe8uWlC.js";import"./index-CkTHI7Xz.js";import"./chevron-down-yoRcCLtw.js";import"./file-text-Dp3GDcf5.js";import"./index-CLwuHly2.js";import"./index-DS2TguYX.js";import"./chevron-right-CiucHPib.js";function Z({salesUsers:s,filters:j}){const[i,g]=x.useState(j.search||"");x.useEffect(()=>{const t=setTimeout(()=>{o.get("/admin/sales-management",{search:i||void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},[i]);const f=(t,a)=>{confirm(`Apakah Anda yakin ingin menghapus sales user "${a}"?`)&&o.delete(`/admin/sales-management/${t}`)},N=t=>{if(!t.current_target)return 0;const a=Number(t.today_points||0),l=Number(t.current_target.daily_target||0);return l===0?0:a/l*100},b=t=>{if(!t.current_target)return 0;const a=Number(t.month_points||0),l=Number(t.current_target.monthly_target||0);return l===0?0:a/l*100};return e.jsx(y,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Sales Management",href:"/admin/sales-management"}],children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Sales Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola target sales dan monitor performa"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Gunakan User Management untuk menambah sales user baru"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[e.jsxs(r,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Sales"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sales aktif"})]})]}),e.jsxs(r,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Prospek Hari Ini"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.data.reduce((t,a)=>t+a.stats.today_prospects,0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total prospek"})]})]}),e.jsxs(r,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Poin Hari Ini"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.data.reduce((t,a)=>t+Number(a.stats.today_points||0),0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total poin"})]})]}),e.jsxs(r,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Poin Bulan Ini"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.data.reduce((t,a)=>t+Number(a.stats.month_points||0),0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total poin bulan ini"})]})]})]}),e.jsxs(r,{children:[e.jsx(m,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Pencarian"]})}),e.jsx(n,{children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(p,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"}),e.jsx(v,{placeholder:"Cari nama, email, atau username...",value:i,onChange:t=>g(t.target.value),className:"pl-10"})]})})]}),e.jsx("div",{className:"space-y-4",children:s.data.length>0?s.data.map(t=>e.jsx(r,{className:"transition-shadow hover:shadow-md",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"mb-3 flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",t.username," â€¢ ",t.email]}),t.department&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t.department})]})}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-4 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-lg bg-muted/30 p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:Number(t.stats.today_prospects||0)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Prospek Hari Ini"})]}),e.jsxs("div",{className:"rounded-lg bg-muted/30 p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:Number(t.stats.today_points||0)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Poin Hari Ini"})]}),e.jsxs("div",{className:"rounded-lg bg-muted/30 p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:Number(t.stats.month_prospects||0)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Prospek Bulan Ini"})]}),e.jsxs("div",{className:"rounded-lg bg-muted/30 p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:Number(t.stats.total_points||0)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Poin"})]})]}),t.stats.current_target&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Target Harian"}),e.jsxs("span",{children:[Number(t.stats.today_points||0)," /"," ",Number(t.stats.current_target.daily_target||0)," poin"]})]}),e.jsx("div",{className:"h-2 w-full rounded-full bg-muted",children:e.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${Math.min(N(t.stats),100)}%`}})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Target Bulanan"}),e.jsxs("span",{children:[Number(t.stats.month_points||0)," /"," ",Number(t.stats.current_target.monthly_target||0)," poin"]})]}),e.jsx("div",{className:"h-2 w-full rounded-full bg-muted",children:e.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${Math.min(b(t.stats),100)}%`}})})]})]}),e.jsxs("div",{className:"flex shrink-0 flex-col gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(h,{href:`/admin/sales-management/${t.id}`,children:[e.jsx(S,{className:"mr-1 h-4 w-4"}),"Detail"]})}),e.jsx(d,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(h,{href:`/admin/sales-management/${t.id}/edit`,children:[e.jsx(k,{className:"mr-1 h-4 w-4"}),"Edit"]})}),e.jsxs(d,{variant:"destructive",size:"sm",onClick:()=>f(t.id,t.name),children:[e.jsx(C,{className:"mr-1 h-4 w-4"}),"Hapus"]})]})]})})},t.id)):e.jsx(r,{children:e.jsxs(n,{className:"p-8 text-center",children:[e.jsx(u,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Belum Ada Sales User"}),e.jsx("p",{className:"mb-4 text-muted-foreground",children:i?"Tidak ada sales user yang sesuai dengan pencarian.":'Buat sales user melalui User Management dan assign role "sales".'})]})})}),s.last_page>1&&e.jsx(r,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Halaman ",s.current_page," dari ",s.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[s.current_page>1&&e.jsx(d,{variant:"outline",size:"sm",onClick:()=>o.get(`/admin/sales-management?page=${s.current_page-1}`,{search:i||void 0}),children:"Sebelumnya"}),s.current_page<s.last_page&&e.jsx(d,{variant:"outline",size:"sm",onClick:()=>o.get(`/admin/sales-management?page=${s.current_page+1}`,{search:i||void 0}),children:"Selanjutnya"})]})]})})})]})})}export{Z as default};
