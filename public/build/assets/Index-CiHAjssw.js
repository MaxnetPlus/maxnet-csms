import{r as d,S as v,j as e,t as E}from"./app-BLez37KC.js";import{B as y}from"./badge-D4xRpmmj.js";import{B as c}from"./createLucideIcon-D7jF-U3a.js";import{C as p,a as H,b as R,c as g}from"./card-DPL22DDR.js";import{I as S}from"./input-CfqiYqKE.js";import{S as D,a as C,b as T,c as _,d as l}from"./select-DacCT32A.js";import{S as V}from"./sales-layout-C_OT4tUC.js";import q from"./ComplateModal-DpSjPmaG.js";import{S as I}from"./search-5A-tRwWL.js";import{U as K}from"./user-lLTAI6fv.js";import{M as Y}from"./mail-DvRFZO9s.js";import{P as G}from"./phone-xMtCwdpl.js";import{C as J}from"./calendar-C3-dEQ3s.js";import{S as f}from"./square-check-big-NAs-teq6.js";import"./index-CUGJ33FR.js";import"./index-DACyNOe1.js";import"./index-BM8vqouP.js";import"./index-C8WjSdCF.js";import"./index-DCLdOoa8.js";import"./index-CudrPBro.js";import"./chevron-down-Owv8Hoe3.js";import"./breadcrumbs-TaC7mxAV.js";import"./app-logo-D_aXoxBq.js";import"./index-S0T8KroD.js";import"./index-DWyXbAj6.js";import"./index-CnGiqB3I.js";import"./chevron-right-Ci9N-8KN.js";import"./chart-column-B0kV8gCq.js";import"./dialog-DJYaKbF2.js";import"./label-DodKdBUJ.js";import"./textarea-DQevsQuX.js";function Ce({followUps:t,filters:u}){const[m,w]=d.useState(u.search||""),[i,O]=d.useState(u.status||"all"),[r,F]=d.useState(u.priority||"all"),[n,x]=d.useState(u.date_from||new Date().toISOString().split("T")[0]),[o,h]=d.useState(u.date_to||new Date().toISOString().split("T")[0]),[P,N]=d.useState(!1),[j,b]=d.useState(null);d.useEffect(()=>{const s=setTimeout(()=>{v.get("/sales/follow-ups",{search:m||void 0,status:i!=="all"?i:void 0,priority:r!=="all"?r:void 0,date_from:n||void 0,date_to:o||void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},[m,i,r,n,o]);const z=s=>({pending:"default",in_progress:"secondary",completed:"success",cancelled:"destructive"})[s]||"default",B=s=>({low:"secondary",medium:"default",high:"destructive"})[s]||"default",M=s=>({pending:"Pending",in_progress:"Sedang Dikerjakan",completed:"Selesai",cancelled:"Dibatalkan"})[s]||s,L=s=>({low:"Rendah",medium:"Sedang",high:"Tinggi"})[s]||s,$=(s,a)=>{b({id:s,customerName:a}),N(!0)},A=()=>{N(!1),b(null)};return e.jsxs(V,{breadcrumbs:[{title:"Dashboard",href:"/sales"},{title:"Follow Up",href:"/sales/follow-ups"}],children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Follow Up Customer"}),e.jsx("p",{className:"text-muted-foreground",children:n===o&&n===new Date().toISOString().split("T")[0]?`Follow up hari ini - Total ${t.total} follow up`:`Total ${t.total} follow up yang ditugaskan`})]})}),e.jsxs(p,{children:[e.jsx(H,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Filter & Pencarian"]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(c,{variant:n===new Date().toISOString().split("T")[0]&&o===new Date().toISOString().split("T")[0]?"default":"outline",size:"sm",onClick:()=>{const s=new Date().toISOString().split("T")[0];x(s),h(s)},children:"Hari Ini"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{const s=new Date;s.setDate(s.getDate()-1);const a=s.toISOString().split("T")[0];x(a),h(a)},children:"Kemarin"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{const s=new Date,a=new Date(s);a.setDate(s.getDate()-s.getDay()),x(a.toISOString().split("T")[0]),h(s.toISOString().split("T")[0])},children:"Minggu Ini"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{const s=new Date,a=new Date(s.getFullYear(),s.getMonth(),1);x(a.toISOString().split("T")[0]),h(s.toISOString().split("T")[0])},children:"Bulan Ini"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"}),e.jsx(S,{placeholder:"Cari nama customer...",value:m,onChange:s=>w(s.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Dari Tanggal"}),e.jsx(S,{type:"date",value:n,onChange:s=>x(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Sampai Tanggal"}),e.jsx(S,{type:"date",value:o,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Status"}),e.jsxs(D,{value:i,onValueChange:O,children:[e.jsx(C,{children:e.jsx(T,{placeholder:"Semua Status"})}),e.jsxs(_,{children:[e.jsx(l,{value:"all",children:"Semua Status"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"in_progress",children:"Sedang Dikerjakan"}),e.jsx(l,{value:"completed",children:"Selesai"}),e.jsx(l,{value:"cancelled",children:"Dibatalkan"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Prioritas"}),e.jsxs(D,{value:r,onValueChange:F,children:[e.jsx(C,{children:e.jsx(T,{placeholder:"Semua Prioritas"})}),e.jsxs(_,{children:[e.jsx(l,{value:"all",children:"Semua Prioritas"}),e.jsx(l,{value:"low",children:"Rendah"}),e.jsx(l,{value:"medium",children:"Sedang"}),e.jsx(l,{value:"high",children:"Tinggi"})]})]})]})]})]})})]}),e.jsx("div",{className:"space-y-4",children:t.data.length>0?t.data.map(s=>{var a;return e.jsx(p,{className:"transition-shadow hover:shadow-md",children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-3 flex flex-col gap-2 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold",children:((a=s.customer)==null?void 0:a.customer_name)||"Customer Tidak Diketahui"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:z(s.status),children:M(s.status)}),e.jsx(y,{variant:B(s.priority),children:L(s.priority)})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Deskripsi:"}),e.jsx("p",{className:"text-sm",children:s.description||"Tidak ada deskripsi"})]}),s.customer&&e.jsxs("div",{className:"mb-3 space-y-1 text-sm text-muted-foreground",children:[s.customer.customer_email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:s.customer.customer_email})]}),s.customer.customer_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:s.customer.customer_phone})]})]}),s.notes&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Catatan:"}),e.jsx("p",{className:"rounded bg-muted/50 p-2 text-sm",children:s.notes})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsxs("span",{children:["Dibuat: ",new Date(s.created_at).toLocaleDateString("id-ID")]})]}),s.completed_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-3 w-3"}),e.jsxs("span",{children:["Selesai: ",new Date(s.completed_at).toLocaleDateString("id-ID")]})]}),s.creator&&e.jsxs("span",{children:["Dibuat oleh: ",s.creator.name]})]})]}),e.jsxs("div",{className:"flex shrink-0 flex-col gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(E,{href:`/sales/follow-ups/${s.id}`,children:"Detail"})}),s.status!=="completed"&&s.status!=="cancelled"&&e.jsxs(c,{size:"sm",onClick:()=>{var k;return $(s.id,((k=s.customer)==null?void 0:k.customer_name)||"Customer Tidak Diketahui")},className:"bg-primary hover:bg-primary/90",children:[e.jsx(f,{className:"mr-1 h-4 w-4"}),"Selesai"]})]})]})})},s.id)}):e.jsx(p,{children:e.jsxs(g,{className:"p-8 text-center",children:[e.jsx(f,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Tidak Ada Follow Up"}),e.jsx("p",{className:"mb-4 text-muted-foreground",children:m||i||r?"Tidak ada follow up yang sesuai dengan filter.":"Anda tidak memiliki follow up yang ditugaskan saat ini."}),!m&&!i&&!r&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow up akan muncul ketika admin menugaskan kepada Anda."})]})})}),t.last_page>1&&e.jsx(p,{children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Halaman ",t.current_page," dari ",t.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[t.current_page>1&&e.jsx(c,{variant:"outline",size:"sm",onClick:()=>v.get(`/sales/follow-ups?page=${t.current_page-1}`,{search:m||void 0,status:i!=="all"?i:void 0,priority:r!=="all"?r:void 0,date_from:n||void 0,date_to:o||void 0}),children:"Sebelumnya"}),t.current_page<t.last_page&&e.jsx(c,{variant:"outline",size:"sm",onClick:()=>v.get(`/sales/follow-ups?page=${t.current_page+1}`,{search:m||void 0,status:i!=="all"?i:void 0,priority:r!=="all"?r:void 0,date_from:n||void 0,date_to:o||void 0}),children:"Selanjutnya"})]})]})})})]}),j&&e.jsx(q,{isOpen:P,onClose:A,followUpId:j.id,customerName:j.customerName})]})}export{Ce as default};
