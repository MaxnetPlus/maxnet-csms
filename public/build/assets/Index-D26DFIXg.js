import{J as C,j as s,Q as S,t as j}from"./app-1TQRmdbV.js";import{B as f}from"./badge-CzRULw-a.js";import{a as D,B as o}from"./createLucideIcon-DWwUjqXg.js";import{C as r,a as i,b as a,c,d as x}from"./card-BAct_2yV.js";import{D as b}from"./data-table-B-nhLrJz.js";import{A as L,D as N}from"./app-layout-C5kaYaAQ.js";import{D as v}from"./download-CeWsSZoC.js";import{U as g}from"./breadcrumbs-LGzNgzJF.js";import{T as K}from"./trending-up-cHpR_S6l.js";import{C as A}from"./chart-column-Ke_nDE-0.js";import{C as R}from"./calendar-D3BkIHPb.js";import{F as k}from"./file-text-s4U_5PDi.js";import"./table-B_2IhHUF.js";import"./input-MMDH--PJ.js";import"./chevron-left-CHkmRqMs.js";import"./chevron-right-BlqDddEB.js";import"./index-DSPG1tRr.js";import"./index-DrblBIbr.js";import"./index-DlB68MZo.js";import"./app-logo-DotSD86T.js";import"./index-BN0-t6CM.js";import"./chevron-down-DygrjMWq.js";import"./target-uKKW-0tC.js";import"./index-DVN2uUiL.js";import"./index-ByE5jpk2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],I=D("Activity",T),E=[{title:"Dashboard",href:"/dashboard"},{title:"Reports",href:"/admin/reports"}];function ns({stats:t,recentImports:h,subscriptionsByStatus:y,monthlyGrowth:u}){var p;const{auth:d}=C().props,l=((p=d==null?void 0:d.user)==null?void 0:p.permissions)||[];console.log("User Permissions:",l);const m=e=>{window.open(`/admin/reports/export?type=${e}`,"_blank")},w=[{header:"Customer ID",accessorKey:"customer_id"},{header:"Name",accessorKey:"customer_name"},{header:"Email",accessorKey:"customer_email"},{header:"Phone",accessorKey:"customer_phone"},{header:"Created",accessorKey:"created_at",cell:e=>new Date(e.created_at).toLocaleDateString()}],_=[{header:"Subscription ID",accessorKey:"subscription_id"},{header:"Customer",accessorKey:"customer",cell:e=>{var n;return((n=e.customer)==null?void 0:n.customer_name)||"N/A"}},{header:"Service ID",accessorKey:"serv_id"},{header:"Status",accessorKey:"subscription_status",cell:e=>s.jsx(f,{variant:e.subscription_status==="active"?"default":"secondary",children:e.subscription_status})},{header:"Created",accessorKey:"created_at",cell:e=>new Date(e.created_at).toLocaleDateString()}];return s.jsxs(L,{breadcrumbs:E,children:[s.jsx(S,{title:"Reports"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Customer and Subscription Analytics"})]}),l.includes("export-data")&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(o,{variant:"outline",onClick:()=>m("customers"),children:[s.jsx(v,{className:"mr-2 h-4 w-4"}),"Export Customers"]}),s.jsxs(o,{variant:"outline",onClick:()=>m("subscriptions"),children:[s.jsx(v,{className:"mr-2 h-4 w-4"}),"Export Subscriptions"]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(a,{className:"text-sm font-medium",children:"Total Customers"}),s.jsx(g,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.total_customers.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.customers_with_subscriptions," with subscriptions"]})]})]}),s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(a,{className:"text-sm font-medium",children:"Total Subscriptions"}),s.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.total_subscriptions.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.active_subscriptions," active"]})]})]}),s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(a,{className:"text-sm font-medium",children:"Active Subscriptions"}),s.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.active_subscriptions.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t.active_subscriptions/t.total_subscriptions*100).toFixed(1),"% of total"]})]})]}),s.jsxs(r,{children:[s.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(a,{className:"text-sm font-medium",children:"Inactive Subscriptions"}),s.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.inactive_subscriptions.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t.inactive_subscriptions/t.total_subscriptions*100).toFixed(1),"% of total"]})]})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(r,{children:[s.jsx(i,{children:s.jsxs(a,{className:"flex items-center gap-2",children:[s.jsx(A,{className:"h-5 w-5"}),"Subscriptions by Status"]})}),s.jsx(c,{children:s.jsx("div",{className:"space-y-3",children:Object.entries(y).map(([e,n])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(f,{variant:e==="active"?"default":"secondary",children:e})}),s.jsx("div",{className:"text-sm font-medium",children:n.toLocaleString()})]},e))})})]}),s.jsxs(r,{children:[s.jsx(i,{children:s.jsxs(a,{className:"flex items-center gap-2",children:[s.jsx(R,{className:"h-5 w-5"}),"Monthly Growth"]})}),s.jsx(c,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Recent Months - Customers"}),s.jsx("div",{className:"space-y-1",children:Object.entries(u.customers).slice(-3).map(([e,n])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:e}),s.jsx("span",{className:"font-medium",children:n})]},e))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-2 text-sm font-medium",children:"Recent Months - Subscriptions"}),s.jsx("div",{className:"space-y-1",children:Object.entries(u.subscriptions).slice(-3).map(([e,n])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:e}),s.jsx("span",{className:"font-medium",children:n})]},e))})]})]})})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(r,{children:[s.jsxs(i,{children:[s.jsx(a,{children:"Recent Customers"}),s.jsx(x,{children:"Latest imported customer records"})]}),s.jsx(c,{children:s.jsx(b,{columns:w,data:h.recent_customers})})]}),s.jsxs(r,{children:[s.jsxs(i,{children:[s.jsx(a,{children:"Recent Subscriptions"}),s.jsx(x,{children:"Latest imported subscription records"})]}),s.jsx(c,{children:s.jsx(b,{columns:_,data:h.recent_subscriptions})})]})]}),s.jsxs(r,{children:[s.jsxs(i,{children:[s.jsx(a,{children:"Quick Actions"}),s.jsx(x,{children:"Common tasks and navigation"})]}),s.jsx(c,{children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.includes("export-data")&&s.jsx(o,{asChild:!0,variant:"outline",children:s.jsxs(j,{href:"/admin/database-import",children:[s.jsx(N,{className:"mr-2 h-4 w-4"}),"Import Data"]})}),l.includes("manage-users")&&s.jsx(o,{asChild:!0,variant:"outline",children:s.jsxs(j,{href:"/admin/users",children:[s.jsx(g,{className:"mr-2 h-4 w-4"}),"Manage Users"]})}),s.jsxs(o,{variant:"outline",onClick:()=>m("customers"),children:[s.jsx(k,{className:"mr-2 h-4 w-4"}),"Generate Report"]})]})})]})]})]})}export{ns as default};
