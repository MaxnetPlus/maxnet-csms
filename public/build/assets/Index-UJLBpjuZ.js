import{r as h,S as d,j as e,t as x}from"./app-B-ukTW92.js";import{B as u}from"./badge-CtisLiuW.js";import{B as t}from"./createLucideIcon-ASykcyKB.js";import{C as i,a as c,b as o,c as r}from"./card-DzHbcDnD.js";import{I as k}from"./input-CJ4P8GfF.js";import{A as _}from"./app-layout-BDdZz83P.js";import{P as j}from"./plus-VybOTEJw.js";import{A as m}from"./award-BTFFqivv.js";import{S as f}from"./search-BwhZd3VW.js";import{E as w}from"./eye-ByHYeDf2.js";import{S as C}from"./square-pen-DFIyonYa.js";import{T as P}from"./trash-2-BxyF8jPu.js";import{U as S}from"./breadcrumbs-BpDWvA3O.js";import"./index-BDaslyCg.js";import"./index-DBJoIYHW.js";import"./index-CoqokzSW.js";import"./chevron-down-D2-xk84H.js";import"./app-logo-DLwBDBCH.js";import"./file-text-CJGSrcU5.js";import"./target-BnQvym84.js";import"./index-CGVfFDzw.js";import"./index-CDE5n06y.js";import"./index-CV_7LmJ5.js";import"./index-D15bOkaC.js";import"./index-I10kkfk3.js";import"./chevron-right-D2TAZo50.js";function ee({categories:a,filters:g,stats:n}){const[l,N]=h.useState(g.search||"");h.useEffect(()=>{const s=setTimeout(()=>{d.get("/admin/prospect-categories",{search:l||void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},[l]);const v=(s,p)=>{confirm(`Apakah Anda yakin ingin menghapus kategori "${p}"?

Hati-hati: Semua prospek yang menggunakan kategori ini akan terpengaruh.`)&&d.delete(`/admin/prospect-categories/${s}`)},b=(s,p)=>{d.patch(`/admin/prospect-categories/${s}/toggle-status`,{is_active:!p})};return e.jsx(_,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Prospect Categories",href:"/admin/prospect-categories"}],children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Prospect Categories"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola kategori prospek dan sistem poin"})]}),e.jsx(t,{asChild:!0,children:e.jsxs(x,{href:"/admin/prospect-categories/create",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Tambah Kategori"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Kategori"}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total_categories}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.active_categories," aktif"]})]})]}),e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Poin Tersedia"}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total_points_available}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dari semua kategori aktif"})]})]}),e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Poin Telah Diberikan"}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.total_points_awarded}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total poin yang telah diperoleh"})]})]}),e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Rata-rata Poin"}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total_categories>0?Math.round(n.total_points_available/n.total_categories):0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per kategori"})]})]})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5"}),"Pencarian"]})}),e.jsx(r,{children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(f,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"}),e.jsx(k,{placeholder:"Cari nama atau deskripsi kategori...",value:l,onChange:s=>N(s.target.value),className:"pl-10"})]})})]}),e.jsx("div",{className:"space-y-4",children:a.data.length>0?a.data.map(s=>e.jsx(i,{className:"transition-shadow hover:shadow-md",children:e.jsxs(r,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:s.is_active?"default":"secondary",className:s.is_active?"bg-green-500":"",children:s.is_active?"Aktif":"Nonaktif"}),e.jsxs(u,{variant:"outline",children:[s.points," poin"]})]})]}),s.description&&e.jsx("p",{className:"mb-4 line-clamp-2 text-muted-foreground",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-lg bg-muted/30 p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:s.prospects_count}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Prospek Menggunakan"})]}),e.jsxs("div",{className:"rounded-lg bg-muted/30 p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:s.total_points_awarded}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Poin Diberikan"})]}),e.jsxs("div",{className:"rounded-lg bg-muted/30 p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:s.prospects_count>0?Math.round(s.total_points_awarded/s.prospects_count):s.points}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rata-rata Poin"})]})]}),e.jsxs("div",{className:"mt-4 text-xs text-muted-foreground",children:["Dibuat:"," ",new Date(s.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex shrink-0 flex-col gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(x,{href:`/admin/prospect-categories/${s.id}`,children:[e.jsx(w,{className:"mr-1 h-4 w-4"}),"Detail"]})}),e.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(x,{href:`/admin/prospect-categories/${s.id}/edit`,children:[e.jsx(C,{className:"mr-1 h-4 w-4"}),"Edit"]})}),e.jsx(t,{variant:s.is_active?"secondary":"default",size:"sm",onClick:()=>b(s.id,s.is_active),children:s.is_active?"Nonaktifkan":"Aktifkan"}),e.jsxs(t,{variant:"destructive",size:"sm",onClick:()=>v(s.id,s.name),disabled:s.prospects_count>0,children:[e.jsx(P,{className:"mr-1 h-4 w-4"}),"Hapus"]})]})]}),s.prospects_count>0&&e.jsx("div",{className:"mt-4 rounded-lg border border-amber-200 bg-amber-50 p-3",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx(S,{className:"mr-1 inline h-4 w-4"}),"Kategori ini digunakan oleh ",s.prospects_count," prospek dan tidak dapat dihapus."]})})]})},s.id)):e.jsx(i,{children:e.jsxs(r,{className:"p-8 text-center",children:[e.jsx(m,{className:"mx-auto mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Belum Ada Kategori"}),e.jsx("p",{className:"mb-4 text-muted-foreground",children:l?"Tidak ada kategori yang sesuai dengan pencarian.":"Mulai dengan membuat kategori prospek pertama."}),!l&&e.jsx(t,{asChild:!0,children:e.jsxs(x,{href:"/admin/prospect-categories/create",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Tambah Kategori"]})})]})})}),a.last_page>1&&e.jsx(i,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Halaman ",a.current_page," dari ",a.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[a.current_page>1&&e.jsx(t,{variant:"outline",size:"sm",onClick:()=>d.get(`/admin/prospect-categories?page=${a.current_page-1}`,{search:l||void 0}),children:"Sebelumnya"}),a.current_page<a.last_page&&e.jsx(t,{variant:"outline",size:"sm",onClick:()=>d.get(`/admin/prospect-categories?page=${a.current_page+1}`,{search:l||void 0}),children:"Selanjutnya"})]})]})})})]})})}export{ee as default};
