import{r as c,S as N,j as e,t as b}from"./app-Dut1LdAE.js";import{B}from"./badge-DeW1Opj4.js";import{B as n}from"./createLucideIcon-C0iULVoC.js";import{C as u,a as $,b as z,c as j}from"./card-Dx9aJHDz.js";import{I as w}from"./input-D3vML1ww.js";import{S as _,a as D,b as k,c as y,d as o}from"./select-BkxJJpQf.js";import{S as L}from"./sales-layout-Bz_FnvHD.js";import{P as T}from"./plus-Bc9PDlSG.js";import{F as O}from"./filter-DgnxXlDA.js";import{S as F}from"./search-C2u3JxhX.js";import{M as H}from"./map-pin-Ch5_NYO2.js";import{U as K}from"./breadcrumbs-CcrN4L9y.js";import"./index-4ihCrLj8.js";import"./index-CRfXtssg.js";import"./index-DOUln0NY.js";import"./index-CTJ23LsC.js";import"./index-CApfq8oQ.js";import"./index-DiuZmm2K.js";import"./chevron-down-CE-Fbol3.js";import"./app-logo-CqiyE-ly.js";import"./chart-column-DTX-CJnC.js";import"./square-check-big-DgHCPjS0.js";import"./index-C1Ioh-Wa.js";import"./index-BgiYP7hp.js";import"./index-hxn349B7.js";import"./chevron-right-CUpFF3n3.js";function xe({prospects:l,categories:C,filters:d}){const[m,g]=c.useState(d.search||""),[r,v]=c.useState(d.status||"all"),[i,p]=c.useState(d.category_id||"all"),S=new Date().toISOString().split("T")[0],[s,x]=c.useState(d.date_from||(!d.date_from&&!d.date_to?S:"")),[t,h]=c.useState(d.date_to||(!d.date_from&&!d.date_to?S:""));c.useEffect(()=>{const a=setTimeout(()=>{N.get("/sales/prospects",{search:m||void 0,status:r!=="all"?r:void 0,category_id:i!=="all"?i:void 0,date_from:s||void 0,date_to:t||void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(a)},[m,r,i,s,t]);const I=a=>({new:"default",contacted:"secondary",qualified:"outline",converted:"success",rejected:"destructive"})[a]||"default",P=a=>({new:"Baru",contacted:"Dihubungi",qualified:"Terkualifikasi",converted:"Terkonversi",rejected:"Ditolak"})[a]||a;return e.jsx(L,{breadcrumbs:[{title:"Dashboard",href:"/sales"},{title:"Prospek",href:"/sales/prospects"}],children:e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-xl font-bold md:text-2xl",children:"Kelola Prospek"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Total ",l.total," prospek"]}),s&&t&&s===t&&s===new Date().toISOString().split("T")[0]&&e.jsx("span",{className:"rounded bg-blue-50 px-2 py-1 text-xs text-blue-600",children:"• Hari ini"}),s&&t&&(s!==t||s!==new Date().toISOString().split("T")[0])&&e.jsxs("span",{className:"rounded bg-orange-50 px-2 py-1 text-xs text-orange-600",children:["•"," ",s===t?`Tanggal ${new Date(s).toLocaleDateString("id-ID")}`:`${new Date(s).toLocaleDateString("id-ID")} - ${new Date(t).toLocaleDateString("id-ID")}`]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[!(s&&t&&s===t&&s===new Date().toISOString().split("T")[0])&&e.jsx(n,{variant:"outline",size:"sm",onClick:()=>{const a=new Date().toISOString().split("T")[0];x(a),h(a)},className:"h-10 w-full text-xs sm:w-auto md:text-sm",children:"Tampilkan Hari Ini"}),e.jsx(n,{asChild:!0,className:"h-10 w-full text-xs sm:w-auto md:text-sm",children:e.jsxs(b,{href:"/sales/prospects/create",children:[e.jsx(T,{className:"mr-2 h-3 w-3 md:h-4 md:w-4"}),"Tambah Prospek"]})})]})]}),e.jsxs(u,{className:"border-0 shadow-sm md:border md:shadow-none",children:[e.jsx($,{className:"pb-3",children:e.jsxs(z,{className:"flex items-center gap-2 text-base md:text-lg",children:[e.jsx(O,{className:"h-4 w-4 md:h-5 md:w-5"}),"Filter & Pencarian"]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"}),e.jsx(w,{placeholder:"Cari nama, email, nomor, atau alamat...",value:m,onChange:a=>g(a.target.value),className:"h-11 pl-10 md:h-10"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Status"}),e.jsxs(_,{value:r,onValueChange:v,children:[e.jsx(D,{className:"h-11 md:h-10",children:e.jsx(k,{placeholder:"Semua Status"})}),e.jsxs(y,{children:[e.jsx(o,{value:"all",children:"Semua Status"}),e.jsx(o,{value:"new",children:"Baru"}),e.jsx(o,{value:"contacted",children:"Dihubungi"}),e.jsx(o,{value:"qualified",children:"Terkualifikasi"}),e.jsx(o,{value:"converted",children:"Terkonversi"}),e.jsx(o,{value:"rejected",children:"Ditolak"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Kategori"}),e.jsxs(_,{value:i,onValueChange:p,children:[e.jsx(D,{className:"h-11 md:h-10",children:e.jsx(k,{placeholder:"Semua Kategori"})}),e.jsxs(y,{children:[e.jsx(o,{value:"all",children:"Semua Kategori"}),C.map(a=>e.jsxs(o,{value:a.id.toString(),children:[a.name," (",a.points," poin)"]},a.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Tanggal Dari"}),e.jsx(w,{type:"date",value:s,onChange:a=>x(a.target.value),className:"h-11 md:h-10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Tanggal Sampai"}),e.jsx(w,{type:"date",value:t,onChange:a=>h(a.target.value),className:"h-11 md:h-10"})]})]}),(m||r!=="all"||i!=="all"||s&&t&&!(s===t&&s===new Date().toISOString().split("T")[0]))&&e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>{const a=new Date().toISOString().split("T")[0];g(""),v("all"),p("all"),x(a),h(a)},className:"h-9 text-xs sm:w-auto",children:"Reset ke Hari Ini"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>{g(""),v("all"),p("all"),x(""),h("")},className:"h-9 text-xs sm:w-auto",children:"Hapus Semua Filter"})]})]})})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:l.data.length>0?l.data.map(a=>e.jsx(u,{className:"border-0 shadow-sm transition-shadow hover:shadow-md md:border md:shadow-none",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"mb-2 flex flex-col gap-2 sm:flex-row sm:items-center",children:[e.jsx("h3",{className:"truncate text-base font-semibold md:text-lg",children:a.customer_name}),e.jsx(B,{variant:I(a.status),className:"self-start text-xs",children:P(a.status)})]}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground md:text-sm",children:[a.customer_email&&e.jsxs("p",{children:["📧 ",a.customer_email]}),a.customer_number&&e.jsxs("p",{children:["📱 ",a.customer_number]}),a.category&&e.jsxs("p",{children:["🏷️ ",a.category.name," (",a.category.points," poin)"]}),a.address&&e.jsxs("p",{className:"truncate",children:["📍 Customer: ",a.address]}),a.sales_location&&e.jsxs("p",{className:"truncate",children:["📍 Sales: ",a.sales_location]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Dibuat: ",new Date(a.created_at).toLocaleDateString("id-ID")]}),a.converted_at&&e.jsxs("span",{children:["Konversi: ",new Date(a.converted_at).toLocaleDateString("id-ID")]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",asChild:!0,className:"h-8 text-xs",children:e.jsx(b,{href:`/sales/prospects/${a.id}`,children:"Detail"})}),a.latitude&&a.longitude&&e.jsx(n,{variant:"ghost",size:"sm",className:"h-8 text-primary",onClick:()=>{const f=`https://www.google.com/maps?q=${a.latitude},${a.longitude}`;window.open(f,"_blank")},children:e.jsx(H,{className:"h-3 w-3"})})]})]})})},a.id)):e.jsx(u,{className:"border-0 shadow-sm md:border md:shadow-none",children:e.jsxs(j,{className:"p-6 text-center md:p-8",children:[e.jsx(K,{className:"mx-auto mb-4 h-10 w-10 text-muted-foreground md:h-12 md:w-12"}),e.jsx("h3",{className:"mb-2 text-base font-semibold md:text-lg",children:"Belum Ada Prospek"}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:m||r!=="all"||i!=="all"||s||t?"Tidak ada prospek yang sesuai dengan filter.":"Mulai tambahkan prospek pertama Anda."}),!m&&r==="all"&&i==="all"&&!s&&!t&&e.jsx(n,{asChild:!0,className:"h-10 text-sm",children:e.jsxs(b,{href:"/sales/prospects/create",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Tambah Prospek"]})})]})})}),l.last_page>1&&e.jsx(u,{className:"border-0 shadow-sm md:border md:shadow-none",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Halaman ",l.current_page," dari ",l.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[l.current_page>1&&e.jsx(n,{variant:"outline",size:"sm",onClick:()=>N.get(`/sales/prospects?page=${l.current_page-1}`,{search:m||void 0,status:r!=="all"?r:void 0,category_id:i!=="all"?i:void 0,date_from:s||void 0,date_to:t||void 0}),className:"h-8 text-xs",children:"Sebelumnya"}),l.current_page<l.last_page&&e.jsx(n,{variant:"outline",size:"sm",onClick:()=>N.get(`/sales/prospects?page=${l.current_page+1}`,{search:m||void 0,status:r!=="all"?r:void 0,category_id:i!=="all"?i:void 0,date_from:s||void 0,date_to:t||void 0}),className:"h-8 text-xs",children:"Selanjutnya"})]})]})})})]})})}export{xe as default};
