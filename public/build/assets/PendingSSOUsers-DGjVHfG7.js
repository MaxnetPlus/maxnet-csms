import{J as C,r as m,j as e,Q as y,t as D,S as n}from"./app-DydvzzJZ.js";import{B as r}from"./createLucideIcon-B8g3hsTz.js";import{C as x,a as h,b as u,d as p,c as j}from"./card-Cr_lE87H.js";import{D as _}from"./data-table-D_1o1EID.js";import{D as w,a as O,b as R,c as k,d as A,f as P}from"./dialog-ZNhD1JMQ.js";import{I as K}from"./input-D_920G0P.js";import{A as z}from"./app-layout-CLVRSiwA.js";import{S as T}from"./search-CLLDnQAm.js";import"./chevron-left-CzszuuzQ.js";import"./chevron-right-Vcumhzzq.js";import"./index-Dw58XjTL.js";import"./index-B-nnM25K.js";import"./index-eNSZ6-Jd.js";import"./index-BrIE_P40.js";import"./index-D1GKDT0r.js";import"./breadcrumbs-DRQFlL8O.js";import"./app-logo-C6-ohmDo.js";import"./index-DKGcT16G.js";import"./index-Dht5mKOf.js";import"./index-BQZ5xCP9.js";import"./chevron-down-BiiGhmOA.js";import"./file-text-CsWsNYoU.js";import"./target-BQ2HF36K.js";const B=[{title:"Dashboard",href:"/dashboard"},{title:"User Management",href:"/admin/users"},{title:"Pending SSO Users",href:"/admin/users/sso-pending"}];function le({pendingUsers:a,filters:f}){var d;const{auth:i}=C().props,c=((d=i==null?void 0:i.user)==null?void 0:d.permissions)||[],[o,v]=m.useState(f.search||""),[t,l]=m.useState(null),g=s=>{s.preventDefault(),n.get("/admin/users/sso-pending",{search:o},{preserveState:!0,replace:!0})},S=s=>{n.post(`/admin/users/${s.id}/approve`)},N=s=>{n.post(`/admin/users/${s.id}/reject`,{},{onSuccess:()=>l(null)})},b=[{header:"Name",accessorKey:"name",cell:s=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.email}),s.username&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["@",s.username]})]})},{header:"Department",accessorKey:"department",cell:s=>s.department||e.jsx("span",{className:"text-muted-foreground",children:"-"})},{header:"Phone",accessorKey:"phone_number",cell:s=>s.phone_number||e.jsx("span",{className:"text-muted-foreground",children:"-"})},{header:"Registered",accessorKey:"created_at",cell:s=>new Date(s.created_at).toLocaleDateString()},{header:"Actions",accessorKey:"id",cell:s=>c!=null&&c.includes("manage-users")?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>S(s),children:"Approve"}),e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>l(s),children:"Reject"})]}):null}];return e.jsxs(z,{breadcrumbs:B,children:[e.jsx(y,{title:"Pending SSO Users"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Pending SSO Users"}),e.jsx("p",{className:"text-muted-foreground",children:"Approve or reject users who registered via SSO"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(r,{asChild:!0,variant:"outline",children:e.jsx(D,{href:route("admin.users.index"),children:"Back to Users"})})})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"Filters"}),e.jsx(p,{children:"Search pending SSO users"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:g,className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute top-2.5 left-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(K,{placeholder:"Search by name, email or username...",value:o,onChange:s=>v(s.target.value),className:"pl-8"})]})}),e.jsx(r,{type:"submit",children:"Search"})]})})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsxs(u,{children:["Pending SSO Users (",a.total,")"]}),e.jsx(p,{children:"Users who registered via SSO and are waiting for approval"})]}),e.jsxs(j,{children:[e.jsx(_,{columns:b,data:a.data,searchKey:"name",searchPlaceholder:"Filter users..."}),a.data.length===0&&e.jsx("div",{className:"flex flex-col items-center justify-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No pending SSO users found"})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",a.from||0," to ",a.to||0," of ",a.total," users"]}),e.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs("select",{className:"h-8 w-16 rounded-md border border-input bg-transparent text-sm",value:"10",onChange:()=>{},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>a.prev_page_url&&n.get(a.prev_page_url),disabled:!a.prev_page_url,children:"Previous"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>a.next_page_url&&n.get(a.next_page_url),disabled:!a.next_page_url,children:"Next"})]})]})]})]})]})]}),e.jsx(w,{open:!!t,onOpenChange:()=>l(null),children:e.jsxs(O,{children:[e.jsxs(R,{children:[e.jsx(k,{children:"Reject SSO User"}),e.jsxs(A,{children:["Are you sure you want to reject ",t==null?void 0:t.name,"? This action cannot be undone and will delete the user's account."]})]}),e.jsxs(P,{children:[e.jsx(r,{variant:"outline",onClick:()=>l(null),children:"Cancel"}),e.jsx(r,{variant:"destructive",onClick:()=>t&&N(t),children:"Reject"})]})]})})]})}export{le as default};
