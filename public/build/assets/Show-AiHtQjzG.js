import{r as M,j as e,t as v,S as w}from"./app-B-ukTW92.js";import{B as l}from"./badge-CtisLiuW.js";import{a as C,B as r}from"./createLucideIcon-ASykcyKB.js";import{C as n,a as d,b as m,c}from"./card-DzHbcDnD.js";import{u as _,N as A}from"./notification-CHYCqxjB.js";import{S as $,a as B,b as L,c as q,d as j}from"./select-AXZnik8k.js";import{A as I}from"./app-layout-BDdZz83P.js";import{A as z}from"./arrow-left-kTUv_o2j.js";import{C as t}from"./circle-check-big-BC_objui.js";import{C as g}from"./circle-x-B2qJ9cVl.js";import{C as o}from"./clock-_IdsBArv.js";import{U as y}from"./user-C7gb92jK.js";import{P as K}from"./phone-D1KWW4fu.js";import{A as S}from"./award-BTFFqivv.js";import{C as E}from"./calendar-CMkiXhDy.js";import{M as U}from"./map-pin-GRVQPuj3.js";import{S as V}from"./square-pen-DFIyonYa.js";import"./alert-17Hf6yla.js";import"./triangle-alert-OqhI31h-.js";import"./index-CDE5n06y.js";import"./index-BDaslyCg.js";import"./index-DBJoIYHW.js";import"./index-CGVfFDzw.js";import"./index-CV_7LmJ5.js";import"./index-ClWntAdO.js";import"./chevron-down-D2-xk84H.js";import"./breadcrumbs-BpDWvA3O.js";import"./app-logo-DLwBDBCH.js";import"./index-CoqokzSW.js";import"./index-D15bOkaC.js";import"./index-I10kkfk3.js";import"./chevron-right-D2TAZo50.js";import"./file-text-CJGSrcU5.js";import"./target-BnQvym84.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],G=C("Map",F);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],Q=C("StickyNote",H);function De({prospect:s}){const[i,x]=M.useState(!1),{notification:f,showNotification:N,hideNotification:D}=_(),T=a=>{switch(a){case"new":return e.jsxs(l,{variant:"secondary",className:"px-4 py-2 text-base font-medium",children:[e.jsx(o,{className:"mr-2 h-5 w-5"}),"Baru"]});case"contacted":return e.jsxs(l,{variant:"outline",className:"px-4 py-2 text-base font-medium",children:[e.jsx(t,{className:"mr-2 h-5 w-5"}),"Dihubungi"]});case"qualified":return e.jsxs(l,{variant:"default",className:"bg-green-500 px-4 py-2 text-base font-medium hover:bg-green-600",children:[e.jsx(t,{className:"mr-2 h-5 w-5"}),"Terkualifikasi"]});case"converted":return e.jsxs(l,{variant:"default",className:"bg-blue-500 px-4 py-2 text-base font-medium hover:bg-blue-600",children:[e.jsx(t,{className:"mr-2 h-5 w-5"}),"Terkonversi"]});case"rejected":return e.jsxs(l,{variant:"destructive",className:"px-4 py-2 text-base font-medium",children:[e.jsx(g,{className:"mr-2 h-5 w-5"}),"Ditolak"]});default:return e.jsxs(l,{variant:"secondary",className:"px-4 py-2 text-base font-medium",children:[e.jsx(o,{className:"mr-2 h-5 w-5"}),"Pending"]})}},p=a=>{switch(a){case"new":return{text:"Baru",icon:e.jsx(o,{className:"h-5 w-5"}),color:"text-gray-600",bgColor:"bg-gray-100"};case"contacted":return{text:"Dihubungi",icon:e.jsx(t,{className:"h-5 w-5"}),color:"text-blue-600",bgColor:"bg-blue-100"};case"qualified":return{text:"Terkualifikasi",icon:e.jsx(t,{className:"h-5 w-5"}),color:"text-green-600",bgColor:"bg-green-100"};case"converted":return{text:"Terkonversi",icon:e.jsx(t,{className:"h-5 w-5"}),color:"text-blue-600",bgColor:"bg-blue-100"};case"rejected":return{text:"Ditolak",icon:e.jsx(g,{className:"h-5 w-5"}),color:"text-red-600",bgColor:"bg-red-100"};default:return{text:"Pending",icon:e.jsx(o,{className:"h-5 w-5"}),color:"text-gray-600",bgColor:"bg-gray-100"}}},u=a=>{const h={new:"Baru",contacted:"Dihubungi",qualified:"Terkualifikasi",converted:"Terkonversi",rejected:"Ditolak"};confirm(`Apakah Anda yakin ingin mengubah status prospek menjadi "${h[a]}"?`)&&(x(!0),w.patch(`/admin/prospect-management/${s.id}/status`,{status:a},{onSuccess:()=>{x(!1),N("success","Status Berhasil Diubah",`Status prospek berhasil diubah menjadi "${h[a]}"`)},onError:b=>{x(!1),console.error("Error updating status:",b),N("error","Gagal Mengubah Status","Terjadi kesalahan saat mengubah status prospek")}}))},k=a=>{const h=a==="qualified"?"menyetujui":"menolak";confirm(`Apakah Anda yakin ingin ${h} prospek ini?`)&&(x(!0),w.patch(`/admin/prospect-management/${s.id}/status`,{status:a},{onSuccess:()=>{x(!1),N("success","Status Berhasil Diubah",`Prospek berhasil ${h==="menyetujui"?"disetujui":"ditolak"}`)},onError:b=>{x(!1),console.error("Error updating status:",b),N("error","Gagal Mengubah Status","Terjadi kesalahan saat mengubah status prospek")}}))},P=()=>{if(s.latitude&&s.longitude){const a=`https://www.google.com/maps?q=${s.latitude},${s.longitude}`;window.open(a,"_blank")}};return e.jsxs(I,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Prospect Management",href:"/admin/prospect-management"},{title:s.customer_name,href:`/admin/prospect-management/${s.id}`}],children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(r,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(v,{href:"/admin/prospect-management",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Kembali"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.customer_name}),e.jsx("p",{className:"text-muted-foreground",children:"Detail prospek dan informasi terkait"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-2",children:[s.status==="new"&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"default",className:"flex-1 bg-green-500 hover:bg-green-600 sm:flex-none",onClick:()=>k("qualified"),disabled:i,children:[e.jsx(t,{className:"mr-2 h-4 w-4"}),i?"Memproses...":"Setujui"]}),e.jsxs(r,{variant:"destructive",onClick:()=>k("rejected"),disabled:i,className:"flex-1 sm:flex-none",children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),i?"Memproses...":"Tolak"]})]}),s.status!=="new"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(o,{className:"h-4 w-4"}),e.jsx("span",{children:"Status dapat diubah di panel samping"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Informasi Prospek"]})}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Nama Lengkap"}),e.jsx("p",{className:"text-lg font-semibold",children:s.customer_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Nomor Telepon"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:s.customer_number})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("div",{className:"flex items-center",children:T(s.status)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Kategori"}),e.jsx(l,{variant:"outline",className:"text-base",children:s.category.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Poin Diperoleh"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("p",{className:"text-xl font-bold text-primary",children:["+",s.points||s.category.points," poin"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Tanggal Dibuat"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:new Date(s.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]})})]}),e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Alamat & Lokasi"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Alamat Lengkap Customer"}),e.jsx("p",{className:"text-base",children:s.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Lokasi Sales"}),e.jsx("p",{className:"text-base",children:s.sales_location?s.sales_location:"Lokasi tidak tersedia"})]}),s.latitude&&s.longitude&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Koordinat GPS"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-mono text-sm",children:s.latitude&&s.longitude?`${Number(s.latitude).toFixed(6)}, ${Number(s.longitude).toFixed(6)}`:"Tidak tersedia"}),e.jsxs(r,{variant:"outline",size:"sm",onClick:P,children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Buka di Maps"]})]})]})]})]}),s.notes&&e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Catatan"]})}),e.jsx(c,{children:e.jsx("p",{className:"text-base whitespace-pre-wrap",children:s.notes})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Sales Information"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Nama Sales"}),e.jsx("p",{className:"font-semibold",children:s.sales.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Username"}),e.jsxs("p",{className:"font-medium",children:["@",s.sales.username]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.sales.email})]}),e.jsx(r,{variant:"outline",size:"sm",asChild:!0,className:"w-full",children:e.jsx(v,{href:`/admin/sales-management/${s.sales.id}`,children:"Lihat Detail Sales"})})]})]}),e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Kelola Status"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-3 text-sm font-medium text-muted-foreground",children:"Status Saat Ini"}),e.jsx("div",{className:"flex items-center justify-center rounded-lg bg-gray-50 p-4 dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`rounded-full p-2 ${p(s.status).bgColor}`,children:e.jsx("div",{className:p(s.status).color,children:p(s.status).icon})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:p(s.status).text}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status prospek saat ini"})]})]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Ubah Status"}),e.jsxs($,{value:s.status,onValueChange:a=>u(a),disabled:i,children:[e.jsx(B,{className:"w-full",children:e.jsx(L,{placeholder:"Pilih status baru"})}),e.jsxs(q,{children:[e.jsx(j,{value:"new",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-4 w-4"}),e.jsx("span",{children:"Baru"})]})}),e.jsx(j,{value:"contacted",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-4 w-4"}),e.jsx("span",{children:"Dihubungi"})]})}),e.jsx(j,{value:"qualified",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Terkualifikasi"})]})}),e.jsx(j,{value:"converted",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Terkonversi"})]})}),e.jsx(j,{value:"rejected",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{children:"Ditolak"})]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Aksi Cepat"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.status==="new"&&e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>u("contacted"),disabled:i,className:"text-xs",children:[e.jsx(t,{className:"mr-1 h-3 w-3"}),"Dihubungi"]}),["new","contacted"].includes(s.status)&&e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>u("qualified"),disabled:i,className:"bg-green-50 text-xs text-green-700 hover:bg-green-100",children:[e.jsx(t,{className:"mr-1 h-3 w-3"}),"Setujui"]}),["new","contacted","qualified"].includes(s.status)&&e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>u("converted"),disabled:i,className:"bg-blue-50 text-xs text-blue-700 hover:bg-blue-100",children:[e.jsx(t,{className:"mr-1 h-3 w-3"}),"Konversi"]}),!["rejected","converted"].includes(s.status)&&e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>u("rejected"),disabled:i,className:"bg-red-50 text-xs text-red-700 hover:bg-red-100",children:[e.jsx(g,{className:"mr-1 h-3 w-3"}),"Tolak"]})]})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("span",{children:"Memperbarui status..."})]}),e.jsxs("div",{className:"mt-4 rounded-lg bg-blue-50 p-3 text-sm",children:[e.jsx("p",{className:"mb-2 font-medium text-blue-900",children:"Informasi Status:"}),e.jsxs("ul",{className:"space-y-1 text-xs text-blue-800",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Baru:"})," Prospek baru dibuat"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dihubungi:"})," Sales sudah menghubungi"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Terkualifikasi:"})," Prospek memenuhi kriteria"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Terkonversi:"})," Menjadi customer"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ditolak:"})," Prospek tidak sesuai"]})]})]})]})]}),e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Kategori Prospek"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Nama Kategori"}),e.jsx("p",{className:"font-semibold",children:s.category.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Poin Kategori"}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:[s.category.points," poin"]})]}),s.category.description&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Deskripsi"}),e.jsx("p",{className:"text-sm",children:s.category.description})]}),e.jsx(r,{variant:"outline",size:"sm",asChild:!0,className:"w-full",children:e.jsx(v,{href:`/admin/prospect-categories/${s.category.id}`,children:"Lihat Detail Kategori"})})]})]}),e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-5 w-5"}),"Timeline"]})}),e.jsxs(c,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-2 h-2 w-2 rounded-full bg-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Prospek dibuat"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),s.updated_at!==s.created_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-2 h-2 w-2 rounded-full bg-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Terakhir diperbarui"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.updated_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]})]})]})]}),e.jsx(A,{show:f.show,type:f.type,title:f.title,message:f.message,onClose:D,autoHide:!0,duration:5e3,position:"top-right"})]})}export{De as default};
