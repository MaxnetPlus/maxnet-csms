import{r as _,j as e,t as g,S as M}from"./app-B2hYMNI5.js";import{B as i}from"./badge-8wrSQBmR.js";import{a as C,B as t}from"./createLucideIcon-DV_iH8MW.js";import{C as r,a as l,b as n,c as d}from"./card-Cm0bTvNT.js";import{u as L,N as A}from"./notification-BR6OdvOq.js";import{S as B,a as $,b as I,c as z,d as o}from"./select-gdxoMfwo.js";import{A as q}from"./app-layout-dhacHFzS.js";import{A as K}from"./arrow-left-BaCXf3SM.js";import{U as w}from"./user-DWOJkQzR.js";import{P as U}from"./phone-B-eCknti.js";import{A as y}from"./award-CwObpUD5.js";import{C as E}from"./calendar-iWWhmyFl.js";import{M as V}from"./map-pin-8YH_VA7u.js";import{S as H}from"./square-pen-FRUB4UW_.js";import{C as h}from"./clock-Ce4E7W2F.js";import{P as f,R as p}from"./repeat-DrSQ2kvc.js";import{C as N}from"./circle-check-big-CZ1N4vuo.js";import{C as b}from"./circle-x-CVeraR2i.js";import"./alert-DAd8qYLS.js";import"./triangle-alert-ZfpjVAaV.js";import"./index-liacH3qE.js";import"./index-CM3CHnuf.js";import"./index-Dkk_Qt6x.js";import"./index-MU9arsYp.js";import"./index-uqU1JcBO.js";import"./index-Bkr1NFrf.js";import"./chevron-down-CwpXDSUf.js";import"./chevron-up-D-bPMqmx.js";import"./breadcrumbs-kb4jvroI.js";import"./app-logo-DAmxlVvw.js";import"./index-C74G8zdK.js";import"./index-B49Zg7V3.js";import"./index-D90rp3hY.js";import"./chevron-right-Dd4b5nL4.js";import"./file-text-D6HImMR6.js";import"./trending-up-BJVc80kP.js";import"./target-BiGQP1qa.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],F=C("Map",R);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],X=C("StickyNote",G);function Me({prospect:s}){const[m,j]=_.useState(!1),{notification:x,showNotification:v,hideNotification:S}=L(),D=a=>{switch(a){case"new":return e.jsx(i,{className:"bg-purple-100 px-4 py-2 text-base font-medium text-purple-800 dark:bg-purple-900 dark:text-purple-300",children:"Baru"});case"contacted":return e.jsx(i,{className:"bg-yellow-100 px-4 py-2 text-base font-medium text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:"Dihubungi"});case"qualified":return e.jsx(i,{className:"bg-blue-100 px-4 py-2 text-base font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:"Terkualifikasi"});case"converted":return e.jsx(i,{className:"bg-green-100 px-4 py-2 text-base font-medium text-green-800 dark:bg-green-900 dark:text-green-300",children:"Terkonversi"});case"rejected":return e.jsx(i,{className:"bg-red-100 px-4 py-2 text-base font-medium text-red-800 dark:bg-red-900 dark:text-red-300",children:"Ditolak"});default:return e.jsx(i,{className:"bg-purple-100 px-4 py-2 text-base font-medium text-purple-800 dark:bg-purple-900 dark:text-purple-300",children:"Pending"})}},u=a=>{switch(a){case"new":return{text:"Baru",icon:e.jsx(h,{className:"h-5 w-5"}),color:"text-purple-800",bgColor:"bg-purple-100"};case"contacted":return{text:"Dihubungi",icon:e.jsx(f,{className:"h-5 w-5"}),color:"text-yellow-800",bgColor:"bg-yellow-100"};case"qualified":return{text:"Terkualifikasi",icon:e.jsx(N,{className:"h-5 w-5"}),color:"text-blue-800",bgColor:"bg-blue-100"};case"converted":return{text:"Terkonversi",icon:e.jsx(p,{className:"h-5 w-5"}),color:"text-green-800",bgColor:"bg-green-100"};case"rejected":return{text:"Ditolak",icon:e.jsx(b,{className:"h-5 w-5"}),color:"text-red-800",bgColor:"bg-red-100"};default:return{text:"Pending",icon:e.jsx(h,{className:"h-5 w-5"}),color:"text-purple-800",bgColor:"bg-purple-100"}}},c=a=>{const k={new:"Baru",contacted:"Dihubungi",qualified:"Terkualifikasi",converted:"Terkonversi",rejected:"Ditolak"};confirm(`Apakah Anda yakin ingin mengubah status prospek menjadi "${k[a]}"?`)&&(j(!0),M.patch(`/admin/prospect-management/${s.id}/status`,{status:a},{onSuccess:()=>{j(!1),v("success","Status Berhasil Diubah",`Status prospek berhasil diubah menjadi "${k[a]}"`)},onError:T=>{j(!1),console.error("Error updating status:",T),v("error","Gagal Mengubah Status","Terjadi kesalahan saat mengubah status prospek")}}))},P=()=>{if(s.latitude&&s.longitude){const a=`https://www.google.com/maps?q=${s.latitude},${s.longitude}`;window.open(a,"_blank")}};return e.jsxs(q,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Prospect Management",href:"/admin/prospect-management"},{title:s.customer_name,href:`/admin/prospect-management/${s.id}`}],children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(g,{href:"/admin/prospect-management",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Kembali"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.customer_name}),e.jsx("p",{className:"text-muted-foreground",children:"Detail prospek dan informasi terkait"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Informasi Prospek"]})}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Nama Lengkap"}),e.jsx("p",{className:"text-lg font-semibold",children:s.customer_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Nomor Telepon"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:s.customer_number})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("div",{className:"flex items-center",children:D(s.status)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Kategori"}),e.jsx(i,{variant:"outline",className:"text-base",children:s.category.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Poin Diperoleh"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("p",{className:"text-xl font-bold text-primary",children:["+",s.points||s.category.points," poin"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Tanggal Dibuat"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:new Date(s.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]})})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Alamat & Lokasi"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Alamat Lengkap Customer"}),e.jsx("p",{className:"text-base",children:s.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Lokasi Sales"}),e.jsx("p",{className:"text-base",children:s.sales_location?s.sales_location:"Lokasi tidak tersedia"})]}),s.latitude&&s.longitude&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Koordinat GPS"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-mono text-sm",children:s.latitude&&s.longitude?`${Number(s.latitude).toFixed(6)}, ${Number(s.longitude).toFixed(6)}`:"Tidak tersedia"}),e.jsxs(t,{variant:"outline",size:"sm",onClick:P,children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Buka di Maps"]})]})]})]})]}),s.notes&&e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Catatan"]})}),e.jsx(d,{children:e.jsx("p",{className:"text-base whitespace-pre-wrap",children:s.notes})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Sales Information"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Nama Sales"}),e.jsx("p",{className:"font-semibold",children:s.sales.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Username"}),e.jsxs("p",{className:"font-medium",children:["@",s.sales.username]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.sales.email})]}),e.jsx(t,{variant:"outline",size:"sm",asChild:!0,className:"w-full",children:e.jsx(g,{href:`/admin/sales-management/${s.sales.id}`,children:"Lihat Detail Sales"})})]})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Kelola Status"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-3 text-sm font-medium text-muted-foreground",children:"Status Saat Ini"}),e.jsx("div",{className:"flex items-center justify-center rounded-lg bg-gray-50 p-4 dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`rounded-full p-2 ${u(s.status).bgColor}`,children:e.jsx("div",{className:u(s.status).color,children:u(s.status).icon})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:u(s.status).text}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status prospek saat ini"})]})]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-sm font-medium text-muted-foreground",children:"Ubah Status"}),e.jsxs(B,{value:s.status,onValueChange:a=>c(a),disabled:m,children:[e.jsx($,{className:"w-full",children:e.jsx(I,{placeholder:"Pilih status baru"})}),e.jsxs(z,{children:[e.jsx(o,{value:"new",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:"Baru"})]})}),e.jsx(o,{value:"contacted",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:"Dihubungi"})]})}),e.jsx(o,{value:"qualified",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:"Terkualifikasi"})]})}),e.jsx(o,{value:"converted",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{children:"Terkonversi"})]})}),e.jsx(o,{value:"rejected",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:"Ditolak"})]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Aksi Cepat"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.status==="new"&&e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>c("contacted"),className:"bg-yellow-50 text-xs text-yellow-700 hover:bg-yellow-100",children:[e.jsx(f,{className:"mr-1 h-3 w-3"}),"Dihubungi"]}),["new","contacted"].includes(s.status)&&e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>c("qualified"),disabled:m,className:"bg-blue-50 text-xs text-blue-700 hover:bg-blue-100",children:[e.jsx(N,{className:"mr-1 h-3 w-3"}),"Setujui"]}),["new","contacted","qualified"].includes(s.status)&&e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>c("converted"),disabled:m,className:"bg-green-50 text-xs text-green-700 hover:bg-green-100",children:[e.jsx(p,{className:"mr-1 h-3 w-3"}),"Konversi"]}),!["rejected","converted"].includes(s.status)&&e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>c("rejected"),disabled:m,className:"bg-red-50 text-xs text-red-700 hover:bg-red-100",children:[e.jsx(b,{className:"mr-1 h-3 w-3"}),"Tolak"]})]})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("span",{children:"Memperbarui status..."})]}),e.jsxs("div",{className:"mt-4 rounded-lg bg-blue-50 p-3 text-sm",children:[e.jsx("p",{className:"mb-2 font-medium text-blue-900",children:"Informasi Status:"}),e.jsxs("ul",{className:"space-y-1 text-xs text-blue-800",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Baru:"})," Prospek baru dibuat"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dihubungi:"})," Sales sudah menghubungi"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Terkualifikasi:"})," Prospek memenuhi kriteria"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Terkonversi:"})," Menjadi customer"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Ditolak:"})," Prospek tidak sesuai"]})]})]})]})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Kategori Prospek"]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Nama Kategori"}),e.jsx("p",{className:"font-semibold",children:s.category.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Poin Kategori"}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:[s.category.points," poin"]})]}),s.category.description&&e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-muted-foreground",children:"Deskripsi"}),e.jsx("p",{className:"text-sm",children:s.category.description})]}),e.jsx(t,{variant:"outline",size:"sm",asChild:!0,className:"w-full",children:e.jsx(g,{href:`/admin/prospect-categories/${s.category.id}`,children:"Lihat Detail Kategori"})})]})]}),e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Timeline"]})}),e.jsxs(d,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-2 h-2 w-2 rounded-full bg-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Prospek dibuat"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),s.updated_at!==s.created_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-2 h-2 w-2 rounded-full bg-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Terakhir diperbarui"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.updated_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]})]})]})]}),e.jsx(A,{show:x.show,type:x.type,title:x.title,message:x.message,onClose:S,autoHide:!0,duration:5e3,position:"top-right"})]})}export{Me as default};
