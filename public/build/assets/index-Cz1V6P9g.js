import{r,j as E}from"./app-BYRtyPb_.js";import{u as D}from"./createLucideIcon-BpiIJ4rm.js";import{f as _,c as z,d as q,b as J,e as A,u as Q,a as X,g as Z}from"./index-BF6Sw6ge.js";import{P as U}from"./index-D7g51E5Q.js";function $(e,t){return r.useReducer((o,n)=>t[o][n]??o,e)}var ee=e=>{const{present:t,children:o}=e,n=te(t),c=typeof o=="function"?o({present:n.isPresent}):r.Children.only(o),p=D(n.ref,ne(c));return typeof o=="function"||n.isPresent?r.cloneElement(c,{ref:p}):null};ee.displayName="Presence";function te(e){const[t,o]=r.useState(),n=r.useRef(null),c=r.useRef(e),p=r.useRef("none"),g=e?"mounted":"unmounted",[N,l]=$(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const s=S(n.current);p.current=N==="mounted"?s:"none"},[N]),_(()=>{const s=n.current,i=c.current;if(i!==e){const v=p.current,f=S(s);e?l("MOUNT"):f==="none"||(s==null?void 0:s.display)==="none"?l("UNMOUNT"):l(i&&v!==f?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,l]),_(()=>{if(t){let s;const i=t.ownerDocument.defaultView??window,m=f=>{const T=S(n.current).includes(f.animationName);if(f.target===t&&T&&(l("ANIMATION_END"),!c.current)){const a=t.style.animationFillMode;t.style.animationFillMode="forwards",s=i.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=a)})}},v=f=>{f.target===t&&(p.current=S(n.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{i.clearTimeout(s),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:r.useCallback(s=>{n.current=s?getComputedStyle(s):null,o(s)},[])}}function S(e){return(e==null?void 0:e.animationName)||"none"}function ne(e){var n,c;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=(c=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:c.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}var y="rovingFocusGroup.onEntryFocus",oe={bubbles:!1,cancelable:!0},w="RovingFocusGroup",[M,L,re]=q(w),[se,Re]=z(w,[re]),[ae,ie]=se(w),G=r.forwardRef((e,t)=>E.jsx(M.Provider,{scope:e.__scopeRovingFocusGroup,children:E.jsx(M.Slot,{scope:e.__scopeRovingFocusGroup,children:E.jsx(ce,{...e,ref:t})})}));G.displayName=w;var ce=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:n,loop:c=!1,dir:p,currentTabStopId:g,defaultCurrentTabStopId:N,onCurrentTabStopIdChange:l,onEntryFocus:s,preventScrollOnEntryFocus:i=!1,...m}=e,v=r.useRef(null),f=D(t,v),F=Q(p),[T,a]=X({prop:g,defaultProp:N??null,onChange:l,caller:w}),[I,C]=r.useState(!1),d=Z(s),R=L(o),h=r.useRef(!1),[W,P]=r.useState(0);return r.useEffect(()=>{const u=v.current;if(u)return u.addEventListener(y,d),()=>u.removeEventListener(y,d)},[d]),E.jsx(ae,{scope:o,orientation:n,dir:F,loop:c,currentTabStopId:T,onItemFocus:r.useCallback(u=>a(u),[a]),onItemShiftTab:r.useCallback(()=>C(!0),[]),onFocusableItemAdd:r.useCallback(()=>P(u=>u+1),[]),onFocusableItemRemove:r.useCallback(()=>P(u=>u-1),[]),children:E.jsx(U.div,{tabIndex:I||W===0?-1:0,"data-orientation":n,...m,ref:f,style:{outline:"none",...e.style},onMouseDown:A(e.onMouseDown,()=>{h.current=!0}),onFocus:A(e.onFocus,u=>{const B=!h.current;if(u.target===u.currentTarget&&B&&!I){const x=new CustomEvent(y,oe);if(u.currentTarget.dispatchEvent(x),!x.defaultPrevented){const O=R().filter(b=>b.focusable),V=O.find(b=>b.active),Y=O.find(b=>b.id===T),H=[V,Y,...O].filter(Boolean).map(b=>b.ref.current);k(H,i)}}h.current=!1}),onBlur:A(e.onBlur,()=>C(!1))})})}),j="RovingFocusGroupItem",K=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:n=!0,active:c=!1,tabStopId:p,children:g,...N}=e,l=J(),s=p||l,i=ie(j,o),m=i.currentTabStopId===s,v=L(o),{onFocusableItemAdd:f,onFocusableItemRemove:F,currentTabStopId:T}=i;return r.useEffect(()=>{if(n)return f(),()=>F()},[n,f,F]),E.jsx(M.ItemSlot,{scope:o,id:s,focusable:n,active:c,children:E.jsx(U.span,{tabIndex:m?0:-1,"data-orientation":i.orientation,...N,ref:t,onMouseDown:A(e.onMouseDown,a=>{n?i.onItemFocus(s):a.preventDefault()}),onFocus:A(e.onFocus,()=>i.onItemFocus(s)),onKeyDown:A(e.onKeyDown,a=>{if(a.key==="Tab"&&a.shiftKey){i.onItemShiftTab();return}if(a.target!==a.currentTarget)return;const I=fe(a,i.orientation,i.dir);if(I!==void 0){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let d=v().filter(R=>R.focusable).map(R=>R.ref.current);if(I==="last")d.reverse();else if(I==="prev"||I==="next"){I==="prev"&&d.reverse();const R=d.indexOf(a.currentTarget);d=i.loop?de(d,R+1):d.slice(R+1)}setTimeout(()=>k(d))}}),children:typeof g=="function"?g({isCurrentTabStop:m,hasTabStop:T!=null}):g})})});K.displayName=j;var ue={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function le(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function fe(e,t,o){const n=le(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ue[n]}function k(e,t=!1){const o=document.activeElement;for(const n of e)if(n===o||(n.focus({preventScroll:t}),document.activeElement!==o))return}function de(e,t){return e.map((o,n)=>e[(t+n)%e.length])}var Ne=G,be=K;export{be as I,ee as P,Ne as R,Re as c};
