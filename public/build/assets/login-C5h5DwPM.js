import{r as x,j as e,x as I,Q as U}from"./app-BYRtyPb_.js";import{I as v}from"./input-error-BV1lPNop.js";import{T as K}from"./text-link-NxzEpLUP.js";import{a as T,B as E}from"./createLucideIcon-BpiIJ4rm.js";import{C as Q}from"./checkbox-BA33XVuZ.js";import{I as b}from"./input-Coj9-rY9.js";import{L as f}from"./label-B5MG-T-a.js";import{u as H,a as J,c as W,b as X,e as N}from"./index-BF6Sw6ge.js";import{c as L,R as Y,I as Z,P as ee}from"./index-Cz1V6P9g.js";import{P as h}from"./index-D7g51E5Q.js";import{A as se}from"./auth-layout-DGImuEqd.js";import{L as F}from"./loader-circle-TYb9LPnn.js";import"./index-Ci58ZKDv.js";import"./app-logo-Bgq89sJX.js";var j="Tabs",[ae,je]=W(j,[L]),P=L(),[re,C]=ae(j),R=x.forwardRef((a,r)=>{const{__scopeTabs:t,value:n,onValueChange:o,defaultValue:c,orientation:i="horizontal",dir:m,activationMode:l="automatic",...p}=a,s=H(m),[d,g]=J({prop:n,onChange:o,defaultProp:c??"",caller:j});return e.jsx(re,{scope:t,baseId:X(),value:d,onValueChange:g,orientation:i,dir:s,activationMode:l,children:e.jsx(h.div,{dir:s,"data-orientation":i,...p,ref:r})})});R.displayName=j;var O="TabsList",A=x.forwardRef((a,r)=>{const{__scopeTabs:t,loop:n=!0,...o}=a,c=C(O,t),i=P(t);return e.jsx(Y,{asChild:!0,...i,orientation:c.orientation,dir:c.dir,loop:n,children:e.jsx(h.div,{role:"tablist","aria-orientation":c.orientation,...o,ref:r})})});A.displayName=O;var M="TabsTrigger",k=x.forwardRef((a,r)=>{const{__scopeTabs:t,value:n,disabled:o=!1,...c}=a,i=C(M,t),m=P(t),l=V(i.baseId,n),p=$(i.baseId,n),s=n===i.value;return e.jsx(Z,{asChild:!0,...m,focusable:!o,active:s,children:e.jsx(h.button,{type:"button",role:"tab","aria-selected":s,"aria-controls":p,"data-state":s?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...c,ref:r,onMouseDown:N(a.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?i.onValueChange(n):d.preventDefault()}),onKeyDown:N(a.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(n)}),onFocus:N(a.onFocus,()=>{const d=i.activationMode!=="manual";!s&&!o&&d&&i.onValueChange(n)})})})});k.displayName=M;var _="TabsContent",D=x.forwardRef((a,r)=>{const{__scopeTabs:t,value:n,forceMount:o,children:c,...i}=a,m=C(_,t),l=V(m.baseId,n),p=$(m.baseId,n),s=n===m.value,d=x.useRef(s);return x.useEffect(()=>{const g=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(ee,{present:o||s,children:({present:g})=>e.jsx(h.div,{"data-state":s?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":l,hidden:!g,id:p,tabIndex:0,...i,ref:r,style:{...a.style,animationDuration:d.current?"0s":void 0},children:g&&c})})});D.displayName=_;function V(a,r){return`${a}-trigger-${r}`}function $(a,r){return`${a}-content-${r}`}var te=R,q=A,G=k,B=D;const oe=te,z=x.forwardRef(({className:a,...r},t)=>e.jsx(q,{ref:t,className:T("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r}));z.displayName=q.displayName;const y=x.forwardRef(({className:a,...r},t)=>e.jsx(G,{ref:t,className:T("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r}));y.displayName=G.displayName;const S=x.forwardRef(({className:a,...r},t)=>e.jsx(B,{ref:t,className:T("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r}));S.displayName=B.displayName;function we({status:a,canResetPassword:r=!0}){const[t,n]=x.useState("standard"),{data:o,setData:c,post:i,processing:m,errors:l,reset:p}=I({login:"",password:"",remember:!1}),s=I({usernameOrEmail:"",password:""}),d=u=>{u.preventDefault(),console.log("Login route:",route("login")),console.log("Form data:",o),i(route("login"),{onFinish:()=>p("password"),onError:w=>{console.error("Login errors:",w)},onSuccess:()=>{console.log("Login successful")}})},g=u=>{u.preventDefault(),console.log("SSO Login route:",route("sso.login")),console.log("SSO Form data:",s.data),s.post(route("sso.login"),{onFinish:()=>s.reset("password"),onError:w=>{console.error("SSO Login errors:",w)},onSuccess:()=>{console.log("SSO Login successful")}})};return e.jsxs(se,{title:"",description:"Enter your credentials to log in",children:[e.jsx(U,{title:"Log in"}),e.jsxs(oe,{defaultValue:"standard",className:"w-full",onValueChange:n,value:t,children:[e.jsxs(z,{className:"mb-6 grid w-full grid-cols-2",children:[e.jsx(y,{value:"standard",children:"Standard Login"}),e.jsx(y,{value:"sso",children:"MaxNet SSO"})]}),e.jsx(S,{value:"standard",children:e.jsx("form",{className:"flex flex-col gap-6",onSubmit:d,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"login",children:"Email or Username"}),e.jsx(b,{id:"login",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"username",value:o.login,onChange:u=>c("login",u.target.value),placeholder:"Email or Username"}),e.jsx(v,{message:l.login})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(f,{htmlFor:"password",children:"Password"})}),e.jsx(b,{id:"password",type:"password",required:!0,tabIndex:2,autoComplete:"current-password",value:o.password,onChange:u=>c("password",u.target.value),placeholder:"Password"}),e.jsx(v,{message:l.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{id:"remember",name:"remember",checked:o.remember,onClick:()=>c("remember",!o.remember),tabIndex:3}),e.jsx(f,{htmlFor:"remember",children:"Remember me"})]}),r&&e.jsx(K,{href:route("password.request"),className:"text-sm",tabIndex:5,children:"Forgot password?"})]}),e.jsxs(E,{type:"submit",className:"mt-4 w-full",tabIndex:4,disabled:m,children:[m&&e.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Log in"]}),l.throttle&&e.jsx("div",{className:"rounded-md bg-red-50 p-3 text-center",children:e.jsx("div",{className:"text-sm text-red-800",children:l.throttle})}),Object.keys(l).length>0&&!l.login&&!l.password&&!l.throttle&&e.jsx("div",{className:"rounded-md bg-red-50 p-3 text-center",children:e.jsx("div",{className:"text-sm text-red-800",children:"Network error. Please check your connection and try again."})})]})})}),e.jsx(S,{value:"sso",children:e.jsx("form",{className:"flex flex-col gap-6",onSubmit:g,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(f,{htmlFor:"usernameOrEmail",children:"Username or Email"}),e.jsx(b,{id:"usernameOrEmail",type:"text",required:!0,autoFocus:t==="sso",tabIndex:1,autoComplete:"username",value:s.data.usernameOrEmail,onChange:u=>s.setData("usernameOrEmail",u.target.value),placeholder:"MaxNet Username or Email"}),e.jsx(v,{message:s.errors.usernameOrEmail})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(f,{htmlFor:"ssoPassword",children:"Password"})}),e.jsx(b,{id:"ssoPassword",type:"password",required:!0,tabIndex:2,autoComplete:"current-password",value:s.data.password,onChange:u=>s.setData("password",u.target.value),placeholder:"MaxNet Password"}),e.jsx(v,{message:s.errors.password})]}),e.jsxs(E,{type:"submit",className:"mt-4 w-full",tabIndex:3,disabled:s.processing,children:[s.processing&&e.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Log in with MaxNet SSO"]}),e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Note: New SSO users require admin approval before they can access the system."}),Object.keys(s.errors).length>0&&e.jsx("div",{className:"rounded-md bg-red-50 p-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-2 h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("div",{className:"text-sm font-medium text-red-800",children:s.errors.usernameOrEmail||s.errors.password||"An error occurred during SSO login. Please try again."})]})})]})})})]}),a&&e.jsx("div",{className:"mt-6 text-center text-sm font-medium text-green-600",children:a})]})}export{we as default};
